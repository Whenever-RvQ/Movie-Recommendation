{"remainingRequest":"D:\\预科班6.2\\前端框架班\\vue\\Vue第二十一天 Vue高级  Vue  vue-blog\\案例\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\预科班6.2\\前端框架班\\vue\\Vue第二十一天 Vue高级  Vue  vue-blog\\案例\\vue-blog\\src\\components\\base\\BaseModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\预科班6.2\\前端框架班\\vue\\Vue第二十一天 Vue高级  Vue  vue-blog\\案例\\vue-blog\\src\\components\\base\\BaseModal.vue","mtime":1611414629900},{"path":"D:\\预科班6.2\\前端框架班\\vue\\Vue第二十一天 Vue高级  Vue  vue-blog\\案例\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\预科班6.2\\前端框架班\\vue\\Vue第二十一天 Vue高级  Vue  vue-blog\\案例\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\预科班6.2\\前端框架班\\vue\\Vue第二十一天 Vue高级  Vue  vue-blog\\案例\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\预科班6.2\\前端框架班\\vue\\Vue第二十一天 Vue高级  Vue  vue-blog\\案例\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgTU9EQUxfREFUQSBmcm9tICdAL2NvbmZpZy9tb2RhbC5jb25maWcnDQppbXBvcnQgVkFMSURBVEVfREFURSBmcm9tICdAL2NvbmZpZy92YWxpZGF0ZS5jb25maWcnDQppbXBvcnQgeyBjcmVhdGVOYW1lc3BhY2VkSGVscGVycyB9IGZyb20gJ3Z1ZXgnDQpjb25zdCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygnbW9kYWwnKQ0KDQppbXBvcnQgQmFzZUZvcm0gZnJvbSAnLi9CYXNlRm9ybScNCi8qDQoNCiAgbW9kYWwNCiAgICB0eXBlIHN0b3JlDQogICAgaXNTaG93IHN0b3JlDQoNCiAgICB0aXRsZSBNT0RBTF9EQVRBIGNvbXB1dGVkDQogICAgd2lkdGggTU9EQUxfREFUQSBjb21wdXRlZA0KICAgIGJ0bnMgIE1PREFMX0RBVEEgY29tcHV0ZWQNCg0KICBmb3JtIA0KICAgDQogICAgZm9ybSBNT0RBTF9EQVRBW3R5cGVdDQogICAgZm9ybURhdGENCiAgICBydWxlcw0KICAgIHR5cGUNCiAgDQoNCiovDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdCYXNlTW9kYWwnLA0KICBjb21wb25lbnRzOiB7DQogICAgQmFzZUZvcm0NCiAgfSwNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZvcm06IHt9LA0KICAgICAgcnVsZXM6IHt9DQogICAgfTsNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAnJHN0b3JlLnN0YXRlLm1vZGFsLnR5cGUnIChuZXdWYWwpIHsNCiAgICAgIGlmIChNT0RBTF9EQVRBW25ld1ZhbF0uZm9ybURhdGEpIHsNCiAgICAgICAgdGhpcy5mb3JtID0gTU9EQUxfREFUQVtuZXdWYWxdLmZvcm1EYXRhLnJlZHVjZSgoYWNjLCBjdXJyKSA9PiB7DQogICAgICAgICAgYWNjW2N1cnJbJ3F1ZXJ5J11dID0gJycNCiAgICAgICAgICByZXR1cm4gYWNjDQogICAgICAgIH0sIHt9KQ0KDQogICAgICAgIC8v6L+H5ruk5Ye66ZyA6KaB55qE5a2X5q615qCh6aqM6KeE5YiZ5a+56LGhDQogICAgICAgIHRoaXMucnVsZXMgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoVkFMSURBVEVfREFURSkuZmlsdGVyKChba2V5XSkgPT4gew0KICAgICAgICAgIHJldHVybiAoa2V5IGluIHRoaXMuZm9ybSkNCiAgICAgICAgfSkpDQoNCiAgICAgIH0NCiAgICB9DQogIH0sDQoNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBTdGF0ZShbJ2lzU2hvdycsICd0eXBlJ10pLA0KICAgIHRpdGxlICgpIHsNCiAgICAgIHJldHVybiBNT0RBTF9EQVRBW3RoaXMudHlwZV0/LnRpdGxlID8/ICfpu5jorqRtb2RhbCcNCiAgICB9LA0KICAgIHdpZHRoICgpIHsNCiAgICAgIHJldHVybiBNT0RBTF9EQVRBW3RoaXMudHlwZV0/LndpZHRoID8/ICc2MCUnDQogICAgfSwNCiAgICBmb3JtRGF0YSAoKSB7DQogICAgICByZXR1cm4gTU9EQUxfREFUQVt0aGlzLnR5cGVdPy5mb3JtRGF0YQ0KICAgIH0sDQogICAgYnRucyAoKSB7DQogICAgICByZXR1cm4gTU9EQUxfREFUQVt0aGlzLnR5cGVdPy5idG5zID8/IFt7DQogICAgICAgIHRhcmdldE5hbWU6ICdjbG9zZScsDQogICAgICAgIG5hbWU6ICflj5bmtognDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0YXJnZXROYW1lOiAnY29uZmlybScsDQogICAgICAgIG5hbWU6ICfmj5DkuqQnLA0KICAgICAgfV0NCiAgICB9DQogIH0sDQogIG1vdW50ZWQgKCkgew0KDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBoYW5kbGVyQnRuIChhY3Rpb24sIGlzU3VibWl0KSB7DQogICAgICAvL+S6i+S7tuS7o+eQhiBjbG9zZSBjb25maXJtDQogICAgICBpZiAoaXNTdWJtaXQpIHsNCiAgICAgICAgdGhpcy5zdWJtaXRGb3JtKHRoaXMudHlwZSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzW2FjdGlvbl0gJiYgdGhpc1thY3Rpb25dKCkNCiAgICB9LA0KICAgIHN1Ym1pdEZvcm0gKGZvcm1OYW1lKSB7DQogICAgICB0aGlzLiRyZWZzWydmb3JtJ10uJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygn5o+Q5Lqk5oiQ5YqfJyk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY29uc29sZS5sb2coJ+aPkOS6pOWksei0pScpOw0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIC4uLm1hcEFjdGlvbnMoWydjbG9zZScsICdvcGVuJywgJ2NvbmZpcm0nXSkNCiAgfSwNCn07DQo="},{"version":3,"sources":["BaseModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"BaseModal.vue","sourceRoot":"src/components/base","sourcesContent":["<template>\r\n  <div>\r\n    <el-dialog :title=\"title\"\r\n               :visible.sync=\"isShow\"\r\n               :width=\"width\"\r\n               :before-close=\"close\">\r\n      <BaseForm :formData=\"formData\"\r\n                :form=\"form\"\r\n                :type=\"type\"\r\n                :rules=\"rules\"\r\n                ref=\"form\" />\r\n      <div slot=\"footer\"\r\n           class=\"dialog-footer\">\r\n        <el-button v-for=\"btn in btns\"\r\n                   :key=\"btn.targetName\"\r\n                   @click=\"handlerBtn(btn.targetName,btn.isSubmit)\">{{btn.name}}</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MODAL_DATA from '@/config/modal.config'\r\nimport VALIDATE_DATE from '@/config/validate.config'\r\nimport { createNamespacedHelpers } from 'vuex'\r\nconst { mapState, mapActions } = createNamespacedHelpers('modal')\r\n\r\nimport BaseForm from './BaseForm'\r\n/*\r\n\r\n  modal\r\n    type store\r\n    isShow store\r\n\r\n    title MODAL_DATA computed\r\n    width MODAL_DATA computed\r\n    btns  MODAL_DATA computed\r\n\r\n  form \r\n   \r\n    form MODAL_DATA[type]\r\n    formData\r\n    rules\r\n    type\r\n  \r\n\r\n*/\r\nexport default {\r\n  name: 'BaseModal',\r\n  components: {\r\n    BaseForm\r\n  },\r\n  data () {\r\n    return {\r\n      form: {},\r\n      rules: {}\r\n    };\r\n  },\r\n  watch: {\r\n    '$store.state.modal.type' (newVal) {\r\n      if (MODAL_DATA[newVal].formData) {\r\n        this.form = MODAL_DATA[newVal].formData.reduce((acc, curr) => {\r\n          acc[curr['query']] = ''\r\n          return acc\r\n        }, {})\r\n\r\n        //过滤出需要的字段校验规则对象\r\n        this.rules = Object.fromEntries(Object.entries(VALIDATE_DATE).filter(([key]) => {\r\n          return (key in this.form)\r\n        }))\r\n\r\n      }\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState(['isShow', 'type']),\r\n    title () {\r\n      return MODAL_DATA[this.type]?.title ?? '默认modal'\r\n    },\r\n    width () {\r\n      return MODAL_DATA[this.type]?.width ?? '60%'\r\n    },\r\n    formData () {\r\n      return MODAL_DATA[this.type]?.formData\r\n    },\r\n    btns () {\r\n      return MODAL_DATA[this.type]?.btns ?? [{\r\n        targetName: 'close',\r\n        name: '取消'\r\n      },\r\n      {\r\n        targetName: 'confirm',\r\n        name: '提交',\r\n      }]\r\n    }\r\n  },\r\n  mounted () {\r\n\r\n  },\r\n  methods: {\r\n    handlerBtn (action, isSubmit) {\r\n      //事件代理 close confirm\r\n      if (isSubmit) {\r\n        this.submitForm(this.type)\r\n        return\r\n      }\r\n      this[action] && this[action]()\r\n    },\r\n    submitForm (formName) {\r\n      this.$refs['form'].$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          console.log('提交成功');\r\n        } else {\r\n          console.log('提交失败');\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n\r\n    ...mapActions(['close', 'open', 'confirm'])\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n\r\n"]}]}