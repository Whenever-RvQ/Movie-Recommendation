{"remainingRequest":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\githubdesk\\Movie-Recommendation\\vue-blog\\src\\components\\base\\BaseUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\src\\components\\base\\BaseUser.vue","mtime":1763206340718},{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdCYXNlVXNlcicsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHVzZXJJbmZvOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbyB8fCB7fSwNCiAgICAgIGZvcm06IHsNCiAgICAgICAgYXZhdG9yOiAnJywNCiAgICAgICAgbmlrbmFtZTogJycsDQogICAgICAgIGVtYWlsOiAnJywNCiAgICAgICAgc2lnbmF0dXJlOiAnJywNCiAgICAgICAgZ2VuZGVyOiAnJywNCiAgICAgICAgcGhvbmU6ICcnLA0KICAgICAgICBiaXJ0aGRheTogJycNCiAgICAgIH0sDQogICAgICBmaWxlOiBudWxsLA0KICAgICAgZGVmYXVsdEF2YXRhcjogJ2h0dHBzOi8vdmlhLnBsYWNlaG9sZGVyLmNvbS8xMjAvMzMzMzMzL0ZGRkZGRj90ZXh0Pem7mOiupOWktOWDjycsIC8vIOm7mOiupOWktOWDj+WNoOS9jeWbvg0KICAgICAgc2lnbmF0dXJlOiAnJyAvLyDljZXni6zlrZjlgqjkuKrmgKfnrb7lkI3vvIzpgb/lhY3mqKHmnb/kuK3kvb/nlKjlj6/pgInpk74NCiAgICB9Ow0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIC8vIOWIneWni+WMluihqOWNleaVsOaNrg0KICAgIHRoaXMuZm9ybSA9IHsNCiAgICAgIC4uLnRoaXMudXNlckluZm8sDQogICAgICBhdmF0b3I6IHRoaXMudXNlckluZm8uYXZhdG9yID8gdGhpcy51c2VySW5mby5hdmF0b3IgOiB0aGlzLmRlZmF1bHRBdmF0YXINCiAgICB9Ow0KICAgIC8vIOWIneWni+WMluS4quaAp+etvuWQjQ0KICAgIHRoaXMuc2lnbmF0dXJlID0gdGhpcy51c2VySW5mby5zaWduYXR1cmUgPyB0aGlzLnVzZXJJbmZvLnNpZ25hdHVyZSA6ICcnOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g5Y+W5raI57yW6L6RDQogICAgY2FuY2VsRWRpdCgpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7IC8vIOi/lOWbnuS4iuS4gOmhtQ0KICAgIH0sDQogICAgLy8g6Kem5Y+R5paH5Lu26YCJ5oupDQogICAgdHJpZ2dlckZpbGVJbnB1dCgpIHsNCiAgICAgIHRoaXMuJHJlZnMuZmlsZUlucHV0LmNsaWNrKCk7DQogICAgfSwNCiAgICAvLyDlpITnkIbmlofku7bpgInmi6kNCiAgICBoYW5kbGVGaWxlU2VsZWN0KGV2ZW50KSB7DQogICAgICBjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdOw0KICAgICAgaWYgKGZpbGUpIHsNCiAgICAgICAgLy8g6aqM6K+B5paH5Lu257G75Z6L5ZKM5aSn5bCPDQogICAgICAgIGlmICghdGhpcy52YWxpZGF0ZUZpbGUoZmlsZSkpIHsNCiAgICAgICAgICB0aGlzLiRub3RpZnkud2FybmluZyh7DQogICAgICAgICAgICB0aXRsZTogJ+aPkOekuicsDQogICAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5pyJ5pWI55qE5Zu+54mH5paH5Lu277yISlBHL1BOR++8jOWkp+Wwj+S4jei2hei/hzVNQu+8iScNCiAgICAgICAgICB9KTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgLy8g5Yib5bu65paH5Lu26aKE6KeIDQogICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4gew0KICAgICAgICAgIHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5hdmF0YXItcHJldmlldycpLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDsNCiAgICAgICAgfTsNCiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7DQogICAgICAgIHRoaXMuZmlsZSA9IGZpbGU7DQogICAgICB9DQogICAgfSwNCiAgICAvLyDpqozor4Hmlofku7YNCiAgICB2YWxpZGF0ZUZpbGUoZmlsZSkgew0KICAgICAgY29uc3QgdmFsaWRUeXBlcyA9IFsnaW1hZ2UvanBlZycsICdpbWFnZS9wbmcnLCAnaW1hZ2UvanBnJ107DQogICAgICBjb25zdCBtYXhTaXplID0gNSAqIDEwMjQgKiAxMDI0OyAvLyA1TUINCiAgICAgIHJldHVybiB2YWxpZFR5cGVzLmluY2x1ZGVzKGZpbGUudHlwZSkgJiYgZmlsZS5zaXplIDw9IG1heFNpemU7DQogICAgfSwNCiAgICBhc3luYyBjaGFuZ2VVc2VySW5mbygpIHsNCiAgICAgIGF3YWl0IHRoaXMuZ2V0SW5wdXRWYWx1ZSgpOw0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kYXBpKHsNCiAgICAgICAgICB0eXBlOiAncHV0VXNlckluZm8nLA0KICAgICAgICAgIGRhdGE6IHRoaXMuZm9ybSwNCiAgICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICAgIGlkOiB0aGlzLnVzZXJJbmZvLl9pZA0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICAgIGlmIChyZXMpIHsNCiAgICAgICAgICAvLyDmm7TmlrBWdWV45Lit55qE55So5oi35L+h5oGvDQogICAgICAgICAgY29uc3QgdXBkYXRlZFVzZXJJbmZvID0gew0KICAgICAgICAgICAgLi4udGhpcy51c2VySW5mbywNCiAgICAgICAgICAgIC4uLnRoaXMuZm9ybQ0KICAgICAgICAgIH07DQogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdTRVRfVVNFUklORk8nLCB1cGRhdGVkVXNlckluZm8pOw0KICAgICAgICAgIC8vIOaYvuekuuaIkOWKn+aPkOekug0KICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsNCiAgICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfnlKjmiLfkv6Hmga/mm7TmlrDmiJDlip8nDQogICAgICAgICAgfSk7DQogICAgICAgICAgY29uc29sZS5sb2coJ+eUqOaIt+S/oeaBr+abtOaWsOaIkOWKnzonLCByZXMpOw0KICAgICAgICB9DQogICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsNCiAgICAgICAgICB0aXRsZTogJ+Wksei0pScsDQogICAgICAgICAgbWVzc2FnZTogJ+eUqOaIt+S/oeaBr+abtOaWsOWksei0pe+8jOivt+eojeWQjumHjeivlScNCiAgICAgICAgfSk7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+abtOaWsOWksei0pTonLCBlcnIpOw0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgZ2V0SW5wdXRWYWx1ZSgpIHsNCiAgICAgIHRoaXMuZm9ybS5uaWtuYW1lID0gdGhpcy4kcmVmcy5uaWtuYW1lSW5wdXQudmFsdWU7DQogICAgICB0aGlzLmZvcm0uZW1haWwgPSB0aGlzLiRyZWZzLmVtYWlsSW5wdXQudmFsdWU7DQogICAgICB0aGlzLmZvcm0uc2lnbmF0dXJlID0gdGhpcy5zaWduYXR1cmU7IC8vIOS7juWNleeLrOWtmOWCqOeahOWPmOmHj+iOt+WPlg0KICAgICAgLy8g6I635Y+W5oCn5Yir5YC8DQogICAgICBjb25zdCBnZW5kZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImdlbmRlciJdOmNoZWNrZWQnKTsNCiAgICAgIHRoaXMuZm9ybS5nZW5kZXIgPSBnZW5kZXJFbCA/IGdlbmRlckVsLnZhbHVlIDogJ290aGVyJzsNCiAgICAgIC8vIOiOt+WPluaJi+acuuWPt+WSjOeUn+aXpQ0KICAgICAgdGhpcy5mb3JtLnBob25lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bob25lJykudmFsdWU7DQogICAgICB0aGlzLmZvcm0uYmlydGhkYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmlydGhkYXknKS52YWx1ZTsNCiAgICAgIGF3YWl0IHRoaXMuZ2V0QXZhdGFyVXJsKCk7DQogICAgfSwNCiAgICBhc3luYyBnZXRBdmF0YXJVcmwoKSB7DQogICAgICBpZiAodGhpcy5maWxlKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCB0aGlzLmZpbGUpOw0KICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgndWlkJywgdGhpcy51c2VySW5mby5faWQpOw0KICAgICAgICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLiRhcGkoew0KICAgICAgICAgICAgdHlwZTogJ3VwbG9hZEF2YXRhcicsDQogICAgICAgICAgICBkYXRhOiBmb3JtRGF0YSwNCiAgICAgICAgICB9KTsNCiAgICAgICAgICB0aGlzLmZvcm0uYXZhdG9yID0gcmVzLmZpbGVVUkw7DQogICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WktOWDj+S4iuS8oOWksei0pTonLCBlcnIpOw0KICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7DQogICAgICAgICAgICB0aXRsZTogJ+Wksei0pScsDQogICAgICAgICAgICBtZXNzYWdlOiAn5aS05YOP5LiK5Lyg5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VJw0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmZvcm0uYXZhdG9yID0gdGhpcy51c2VySW5mby5hdmF0b3IgPyB0aGlzLnVzZXJJbmZvLmF2YXRvciA6IHRoaXMuZGVmYXVsdEF2YXRhcjsNCiAgICAgIH0NCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["BaseUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BaseUser.vue","sourceRoot":"src/components/base","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- 页面标题 -->\r\n    <div class=\"page-title\">\r\n      <h1>个人信息设置</h1>\r\n      <p>更新您的个人资料和账户信息</p>\r\n    </div>\r\n\r\n    <!-- 信息卡片 -->\r\n    <div class=\"card\">\r\n      <!-- 头像上传区域 -->\r\n      <div class=\"avatar-section\">\r\n        <div class=\"avatar-container\" @click=\"triggerFileInput\">\r\n          <img :src=\"userInfo.avator ? userInfo.avator : defaultAvatar\" alt=\"用户头像\" class=\"avatar-preview\">\r\n          <div class=\"avatar-upload-overlay\">\r\n            <i class=\"fa fa-camera avatar-upload-icon\"></i>\r\n          </div>\r\n          <input type=\"file\" ref=\"fileInput\" class=\"hidden avatar-choose\" accept=\"image/*\"\r\n            @change=\"handleFileSelect\">\r\n        </div>\r\n\r\n        <div class=\"avatar-info\">\r\n          <h3>头像设置</h3>\r\n          <p>上传清晰的个人照片有助于他人更好地识别您的身份。</p>\r\n          <ul class=\"avatar-rules\">\r\n            <li><i class=\"fa fa-check-circle\"></i> 支持 JPG、PNG 格式</li>\r\n            <li><i class=\"fa fa-check-circle\"></i> 图片大小不超过 5MB</li>\r\n            <li><i class=\"fa fa-check-circle\"></i> 建议尺寸 200×200 像素</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 表单区域 -->\r\n      <form class=\"profile-form\">\r\n        <!-- 姓名 -->\r\n        <div class=\"form-group\">\r\n          <label for=\"fullname\" class=\"form-label\">昵称</label>\r\n          <div class=\"form-input-wrapper\">\r\n            <i class=\"fa fa-user input-icon\"></i>\r\n            <input type=\"text\" id=\"fullname\" class=\"form-input icon-left\" :value=\"userInfo.nikname\"\r\n              placeholder=\"请输入您的昵称\" ref=\"niknameInput\">\r\n          </div>\r\n          <p class=\"error-message\">请输入有效的昵称</p>\r\n        </div>\r\n\r\n        <!-- 性别 -->\r\n        <div class=\"form-group\">\r\n          <label class=\"form-label\">性别</label>\r\n          <div class=\"gender-options\">\r\n            <label class=\"gender-option\">\r\n              <input type=\"radio\" name=\"gender\" value=\"male\" :checked=\"userInfo.gender === 'male' || !userInfo.gender\" class=\"gender-input\">\r\n              <span class=\"gender-label\">男</span>\r\n            </label>\r\n            <label class=\"gender-option\">\r\n              <input type=\"radio\" name=\"gender\" value=\"female\" :checked=\"userInfo.gender === 'female'\" class=\"gender-input\">\r\n              <span class=\"gender-label\">女</span>\r\n            </label>\r\n            <label class=\"gender-option\">\r\n              <input type=\"radio\" name=\"gender\" value=\"other\" :checked=\"userInfo.gender === 'other'\" class=\"gender-input\">\r\n              <span class=\"gender-label\">保密</span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 手机号码 -->\r\n        <div class=\"form-group\">\r\n          <label for=\"phone\" class=\"form-label\">手机号码</label>\r\n          <div class=\"form-input-wrapper\">\r\n            <i class=\"fa fa-phone input-icon\"></i>\r\n            <input type=\"tel\" id=\"phone\" class=\"form-input icon-left\" :value=\"userInfo.phone ? userInfo.phone : '138****1234'\"\r\n              placeholder=\"请输入您的手机号码\">\r\n          </div>\r\n          <p class=\"error-message\">请输入有效的手机号码</p>\r\n        </div>\r\n\r\n        <!-- 电子邮箱 -->\r\n        <div class=\"form-group\">\r\n          <label for=\"email\" class=\"form-label\">电子邮箱</label>\r\n          <div class=\"form-input-wrapper\">\r\n            <i class=\"fa fa-envelope input-icon\"></i>\r\n            <input type=\"email\" id=\"email\" class=\"form-input icon-left\" :value=\"userInfo.email\"\r\n              placeholder=\"请输入您的电子邮箱\" ref=\"emailInput\">\r\n          </div>\r\n          <p class=\"error-message\">请输入有效的电子邮箱</p>\r\n        </div>\r\n\r\n        <!-- 出生日期 -->\r\n        <div class=\"form-group\">\r\n          <label for=\"birthday\" class=\"form-label\">出生日期</label>\r\n          <div class=\"form-input-wrapper\">\r\n            <i class=\"fa fa-calendar input-icon\"></i>\r\n            <input type=\"date\" id=\"birthday\" class=\"form-input icon-left\" :value=\"userInfo.birthday ? userInfo.birthday : '1990-01-01'\">\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 个人简介 -->\r\n        <div class=\"form-group\">\r\n          <label for=\"bio\" class=\"form-label\">个性签名</label>\r\n          <div class=\"form-input-wrapper\" style=\"position: relative;\">\r\n            <textarea id=\"bio\" class=\"form-textarea\" placeholder=\"请输入您的个性签名（可选）\"\r\n              v-model=\"signature\" ref=\"signatureInput\"></textarea>\r\n            <span class=\"char-count\">{{ signature.length }}/150</span>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 提交按钮区域 -->\r\n        <div class=\"button-group\">\r\n          <button type=\"button\" class=\"btn btn-cancel\" @click=\"cancelEdit()\">取消</button>\r\n          <button type=\"button\" class=\"btn btn-save\" @click=\"changeUserInfo()\">\r\n            <i class=\"fa fa-save\"></i> 保存修改\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'BaseUser',\r\n  data() {\r\n    return {\r\n      userInfo: this.$store.state.userInfo || {},\r\n      form: {\r\n        avator: '',\r\n        nikname: '',\r\n        email: '',\r\n        signature: '',\r\n        gender: '',\r\n        phone: '',\r\n        birthday: ''\r\n      },\r\n      file: null,\r\n      defaultAvatar: 'https://via.placeholder.com/120/333333/FFFFFF?text=默认头像', // 默认头像占位图\r\n      signature: '' // 单独存储个性签名，避免模板中使用可选链\r\n    };\r\n  },\r\n  mounted() {\r\n    // 初始化表单数据\r\n    this.form = {\r\n      ...this.userInfo,\r\n      avator: this.userInfo.avator ? this.userInfo.avator : this.defaultAvatar\r\n    };\r\n    // 初始化个性签名\r\n    this.signature = this.userInfo.signature ? this.userInfo.signature : '';\r\n  },\r\n  methods: {\r\n    // 取消编辑\r\n    cancelEdit() {\r\n      this.$router.go(-1); // 返回上一页\r\n    },\r\n    // 触发文件选择\r\n    triggerFileInput() {\r\n      this.$refs.fileInput.click();\r\n    },\r\n    // 处理文件选择\r\n    handleFileSelect(event) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        // 验证文件类型和大小\r\n        if (!this.validateFile(file)) {\r\n          this.$notify.warning({\r\n            title: '提示',\r\n            message: '请选择有效的图片文件（JPG/PNG，大小不超过5MB）'\r\n          });\r\n          return;\r\n        }\r\n        // 创建文件预览\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n          this.$el.querySelector('.avatar-preview').src = e.target.result;\r\n        };\r\n        reader.readAsDataURL(file);\r\n        this.file = file;\r\n      }\r\n    },\r\n    // 验证文件\r\n    validateFile(file) {\r\n      const validTypes = ['image/jpeg', 'image/png', 'image/jpg'];\r\n      const maxSize = 5 * 1024 * 1024; // 5MB\r\n      return validTypes.includes(file.type) && file.size <= maxSize;\r\n    },\r\n    async changeUserInfo() {\r\n      await this.getInputValue();\r\n      try {\r\n        const res = await this.$api({\r\n          type: 'putUserInfo',\r\n          data: this.form,\r\n          params: {\r\n            id: this.userInfo._id\r\n          }\r\n        });\r\n        if (res) {\r\n          // 更新Vuex中的用户信息\r\n          const updatedUserInfo = {\r\n            ...this.userInfo,\r\n            ...this.form\r\n          };\r\n          this.$store.commit('SET_USERINFO', updatedUserInfo);\r\n          // 显示成功提示\r\n          this.$notify.success({\r\n            title: '成功',\r\n            message: '用户信息更新成功'\r\n          });\r\n          console.log('用户信息更新成功:', res);\r\n        }\r\n      } catch (err) {\r\n        this.$notify.error({\r\n          title: '失败',\r\n          message: '用户信息更新失败，请稍后重试'\r\n        });\r\n        console.error('更新失败:', err);\r\n      }\r\n    },\r\n    async getInputValue() {\r\n      this.form.nikname = this.$refs.niknameInput.value;\r\n      this.form.email = this.$refs.emailInput.value;\r\n      this.form.signature = this.signature; // 从单独存储的变量获取\r\n      // 获取性别值\r\n      const genderEl = document.querySelector('input[name=\"gender\"]:checked');\r\n      this.form.gender = genderEl ? genderEl.value : 'other';\r\n      // 获取手机号和生日\r\n      this.form.phone = document.getElementById('phone').value;\r\n      this.form.birthday = document.getElementById('birthday').value;\r\n      await this.getAvatarUrl();\r\n    },\r\n    async getAvatarUrl() {\r\n      if (this.file) {\r\n        try {\r\n          const formData = new FormData();\r\n          formData.append('file', this.file);\r\n          formData.append('uid', this.userInfo._id);\r\n          let res = await this.$api({\r\n            type: 'uploadAvatar',\r\n            data: formData,\r\n          });\r\n          this.form.avator = res.fileURL;\r\n        } catch (err) {\r\n          console.error('头像上传失败:', err);\r\n          this.$notify.error({\r\n            title: '失败',\r\n            message: '头像上传失败，请稍后重试'\r\n          });\r\n        }\r\n      } else {\r\n        this.form.avator = this.userInfo.avator ? this.userInfo.avator : this.defaultAvatar;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n// 主题变量（与网站统一）\r\n$primary = #E50914\r\n$primary-dark = #C00812\r\n$light-black = #252525\r\n$lighter-black = #333333\r\n$light = #F8F8F8\r\n$gray = #AAAAAA\r\n$border-color = #444444\r\n$transition = all 0.3s ease\r\n\r\n// 全局样式\r\n.container\r\n  max-width 1000px\r\n  margin 0 auto\r\n  padding 20px\r\n  background-color $light-black\r\n  min-height 100vh\r\n\r\n// 页面标题样式\r\n.page-title\r\n  text-align center\r\n  margin-bottom 30px\r\n  padding-bottom 15px\r\n  border-bottom 1px solid $border-color\r\n\r\n  h1\r\n    font-size clamp(1.8rem, 3vw, 2.2rem)\r\n    color $light\r\n    margin-bottom 8px\r\n    font-weight 600\r\n\r\n  p\r\n    color $gray\r\n    font-size 1rem\r\n\r\n// 卡片容器样式\r\n.card\r\n  background-color $lighter-black\r\n  border-radius 12px\r\n  box-shadow 0 4px 20px rgba(0, 0, 0, 0.2)\r\n  padding 30px\r\n  margin-bottom 24px\r\n  border 1px solid $border-color\r\n\r\n// 头像上传区域\r\n.avatar-section\r\n  display flex\r\n  flex-direction column\r\n  align-items center\r\n  margin-bottom 40px\r\n  gap 20px\r\n\r\n.avatar-container\r\n  position relative\r\n  cursor pointer\r\n\r\n.avatar-preview\r\n  width 120px\r\n  height 120px\r\n  border-radius 50%\r\n  object-fit cover\r\n  border 4px solid $border-color\r\n  box-shadow 0 4px 10px rgba(0, 0, 0, 0.3)\r\n  background-color $light-black\r\n\r\n.avatar-choose\r\n  position absolute\r\n  display none\r\n\r\n.avatar-upload-overlay\r\n  position absolute\r\n  top 0\r\n  left 0\r\n  width 120px\r\n  height 120px\r\n  border-radius 50%\r\n  background-color rgba(0, 0, 0, 0.6)\r\n  display flex\r\n  align-items center\r\n  justify-content center\r\n  opacity 0\r\n  transition $transition\r\n  cursor pointer\r\n\r\n.avatar-container:hover .avatar-upload-overlay\r\n  opacity 1\r\n\r\n.avatar-upload-icon\r\n  color $light\r\n  font-size 24px\r\n\r\n.avatar-info\r\n  width 100%\r\n  max-width 400px\r\n  display flex\r\n  flex-direction column\r\n  align-items flex-start\r\n\r\n  h3\r\n    font-size 1.1rem\r\n    color $light\r\n    margin-bottom 8px\r\n    font-weight 600\r\n\r\n  p\r\n    display block\r\n    color $gray\r\n    font-size 0.9rem\r\n    margin-bottom 12px\r\n\r\n.avatar-rules\r\n  display block\r\n  list-style none\r\n  font-size 0.85rem\r\n  color $gray\r\n  padding 0\r\n\r\n  li\r\n    margin-bottom 6px\r\n    display flex\r\n    align-items center\r\n\r\n  i\r\n    color $primary\r\n    margin-right 8px\r\n    font-size 0.9rem\r\n\r\n// 表单样式\r\n.profile-form\r\n  display flex\r\n  flex-direction column\r\n  gap 24px\r\n\r\n.form-group\r\n  transition $transition\r\n  display flex\r\n  flex-direction column\r\n  align-items flex-start\r\n  width 100%\r\n\r\n.form-group:focus-within\r\n  transform translateY(-2px)\r\n\r\n.form-label\r\n  display block\r\n  margin-bottom 8px\r\n  font-weight 500\r\n  color $light\r\n  font-size 0.95rem\r\n\r\n.form-input-wrapper\r\n  width 100%\r\n  position relative\r\n\r\n.form-input\r\n  width 100%\r\n  padding 12px 16px\r\n  border 1px solid $border-color\r\n  border-radius 8px\r\n  font-size 0.95rem\r\n  color $light\r\n  background-color $light-black\r\n  transition $transition\r\n\r\n.form-input.icon-left\r\n  padding-left 44px\r\n\r\n.form-input:focus\r\n  outline none\r\n  border-color $primary\r\n  box-shadow 0 0 0 3px rgba(229,9,20,0.2)\r\n\r\n.input-icon\r\n  position absolute\r\n  left 16px\r\n  top 50%\r\n  transform translateY(-50%)\r\n  color $gray\r\n  font-size 1rem\r\n\r\n.form-textarea\r\n  width 100%\r\n  padding 12px 16px\r\n  border 1px solid $border-color\r\n  border-radius 8px\r\n  font-size 0.95rem\r\n  color $light\r\n  background-color $light-black\r\n  resize none\r\n  min-height 100px\r\n  transition $transition\r\n\r\n.form-textarea:focus\r\n  outline none\r\n  border-color $primary\r\n  box-shadow 0 0 0 3px rgba(229,9,20,0.2)\r\n\r\n.gender-options\r\n  display flex\r\n  gap 24px\r\n  margin-top 8px\r\n\r\n.gender-option\r\n  display flex\r\n  align-items center\r\n  cursor pointer\r\n\r\n.gender-input\r\n  margin-right 8px\r\n  accent-color $primary\r\n\r\n.gender-label\r\n  color $light\r\n  font-size 0.95rem\r\n\r\n.char-count\r\n  position absolute\r\n  right 16px\r\n  bottom 12px\r\n  font-size 0.8rem\r\n  color $gray\r\n\r\n.error-message\r\n  color $primary\r\n  font-size 0.85rem\r\n  margin-top 6px\r\n  display none\r\n\r\n// 按钮区域样式\r\n.button-group\r\n  display flex\r\n  justify-content flex-end\r\n  gap 16px\r\n  margin-top 16px\r\n  flex-wrap wrap\r\n\r\n.btn\r\n  padding 12px 24px\r\n  border-radius 8px\r\n  font-size 0.95rem\r\n  font-weight 500\r\n  cursor pointer\r\n  transition $transition\r\n  border none\r\n  display inline-flex\r\n  align-items center\r\n  justify-content center\r\n\r\n.hidden\r\n  display none\r\n\r\n.btn i\r\n  margin-right 8px\r\n\r\n.btn-cancel\r\n  background-color $light-black\r\n  color $light\r\n  border 1px solid $border-color\r\n\r\n.btn-cancel:hover\r\n  background-color #444444\r\n  border-color #555555\r\n\r\n.btn-save\r\n  background-color $primary\r\n  color $light\r\n\r\n.btn-save:hover\r\n  background-color $primary-dark\r\n  box-shadow 0 4px 12px rgba(229,9,20,0.3)\r\n  transform translateY(-2px)\r\n\r\n.btn-save:active\r\n  transform translateY(0)\r\n\r\n// 响应式适配\r\n@media (min-width: 768px)\r\n  .avatar-section\r\n    flex-direction row\r\n    align-items center\r\n    gap 32px\r\n\r\n  .avatar-info\r\n    margin-top 0\r\n\r\n  .button-group\r\n    flex-wrap nowrap\r\n\r\n@media (max-width: 767px)\r\n  .card\r\n    padding 20px\r\n\r\n  .gender-options\r\n    flex-direction column\r\n    gap 12px\r\n\r\n  .btn\r\n    flex 1\r\n    min-width 100%\r\n\r\n  .container\r\n    padding 15px\r\n\r\n  .page-title\r\n    margin-bottom 20px\r\n</style>"]}]}