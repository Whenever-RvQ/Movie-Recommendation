{"remainingRequest":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\githubdesk\\Movie-Recommendation\\vue-blog\\src\\views\\Column.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\src\\views\\Column.vue","mtime":1763195953223},{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgTW92aWVJdGVtIGZyb20gJ0AvY29tcG9uZW50cy9tb3ZpZS9Nb3ZpZUl0ZW0nDQppbXBvcnQgQmFzZTQwNCBmcm9tICdAL2NvbXBvbmVudHMvYmFzZS9CYXNlNDA0LnZ1ZSc7DQppbXBvcnQgUVMgZnJvbSAncXMnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdNb3ZpZUZpbHRlcicsDQogIGluamVjdDogWydjbG9zZUxvYWRDbG9jayddLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICAvLyDlubTku73pgInpobnvvIgyMDAwLTIwMjXvvIzljIXlkKvljLrpl7TvvIkNCiAgICAgIHllYXJPcHRpb25zOiBbDQogICAgICAgIHsgbGFiZWw6ICflhajpg6gnLCB2YWx1ZTogbnVsbCB9LA0KICAgICAgICB7IGxhYmVsOiAnMjAyNScsIHZhbHVlOiAnMjAyNScgfSwNCiAgICAgICAgeyBsYWJlbDogJzIwMjQnLCB2YWx1ZTogJzIwMjQnIH0sDQogICAgICAgIHsgbGFiZWw6ICcyMDIzJywgdmFsdWU6ICcyMDIzJyB9LA0KICAgICAgICB7IGxhYmVsOiAnMjAyMicsIHZhbHVlOiAnMjAyMicgfSwNCiAgICAgICAgeyBsYWJlbDogJzIwMjEnLCB2YWx1ZTogJzIwMjEnIH0sDQogICAgICAgIHsgbGFiZWw6ICcyMDIwJywgdmFsdWU6ICcyMDIwJyB9LA0KICAgICAgICB7IGxhYmVsOiAnMjAxMC0yMDE5JywgdmFsdWU6ICcyMDEwLTIwMTknLCBzdGFydDogMjAxMCwgZW5kOiAyMDE5IH0sDQogICAgICAgIHsgbGFiZWw6ICcyMDAwLTIwMDknLCB2YWx1ZTogJzIwMDAtMjAwOScsIHN0YXJ0OiAyMDAwLCBlbmQ6IDIwMDkgfQ0KICAgICAgXSwNCiAgICAgIC8vIOmAieS4reeahOetm+mAieadoeS7tg0KICAgICAgc2VsZWN0ZWRPcHRpb25zOiB7DQogICAgICAgIHllYXI6ICflhajpg6gnLA0KICAgICAgICB0eXBlOiAnJw0KICAgICAgfSwNCiAgICAgIHNlbGVjdGVkWWVhcjogbnVsbCwNCiAgICAgIHNlbGVjdGVkVHlwZTogJycsDQogICAgICBjb2x1bW5zOiBbXSwNCiAgICAgIG1vdmllczogW10sDQogICAgICAvLyDmt7vliqDnvLrlpLHnmoTlsZ7mgKcNCiAgICAgIHNpemU6IDIwLA0KICAgICAgcGFnZTogMSwNCiAgICAgIHNob3c0MDQ6IGZhbHNlLA0KICAgICAgcXVlcnk6IHsNCiAgICAgICAgY29sdW1uOiAnJywNCiAgICAgICAgZGF0ZTogJycNCiAgICAgIH0NCiAgICB9Ow0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgTW92aWVJdGVtLCBCYXNlNDA0DQogIH0sDQogIGFjdGl2YXRlZCgpIHsNCiAgICBpZiAodGhpcy4kcm91dGUucXVlcnk/LmNvbHVtbklkKSB7DQogICAgICB0aGlzLnF1ZXJ5LmNvbHVtbiA9IHRoaXMuJHJvdXRlLnF1ZXJ5Py5jb2x1bW5JZA0KICAgIH0NCiAgfSwNCg0KICBkZWFjdGl2YXRlZCgpIHsNCiAgICB0aGlzLnF1ZXJ5ID0gew0KICAgICAgY29sdW1uOiAnJywNCiAgICAgIGRhdGU6ICcnLA0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldENvbHVtbnMoKQ0KICAgIHRoaXMuZ2V0TW92aWVzKCkNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLiRFdmVudEJ1cy4kb24oJ3VwZGF0ZVZpZXcnLCAoKSA9PiB7DQogICAgICB0aGlzLmdldENvbHVtbnMoKQ0KICAgICAgdGhpcy5nZXRNb3ZpZXMoKQ0KICAgIH0pDQogIH0sDQogIHdhdGNoOiB7DQogICAgJHJvdXRlOiB7DQogICAgICBoYW5kbGVyKCkgew0KICAgICAgICB0aGlzLmhhbmRsZVJvdXRlQ2hhbmdlKCkNCg0KICAgICAgfSwNCg0KICAgICAgaW1tZWRpYXRlOiB0cnVlDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGNvbHVtbldvcmRzKCkgew0KICAgICAgcmV0dXJuIHRoaXMuY29sdW1ucy5tYXAoaXRlbSA9PiB7DQoNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsDQogICAgICAgICAgdmFsdWU6IGl0ZW0uYWlkcy5sZW5ndGggfHwgMCwNCiAgICAgICAgICBpZDogaXRlbS5faWQNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyB3b3JkQ2xpY2tIYW5kbGVyKG5hbWUpIHsNCg0KICAgICAgLy8gbGV0IGNvbHVtbklkID0gdGhpcy5jb2x1bW5zLmZpbmQoaXRlbSA9PiB7DQogICAgICAvLyAgIHJldHVybiBpdGVtLm5hbWUgPT09IG5hbWUNCiAgICAgIC8vIH0pPy5faWQNCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvKQ0KICAgICAgLy8gaWYgKCF0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbykgew0KICAgICAgLy8gICB0cnkgew0KICAgICAgLy8gICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRVc2VySW5mbycpDQogICAgICAvLyAgICAgLy8g5YaN5qyh5qOA5p+l5piv5ZCm6I635Y+W5Yiw55So5oi35L+h5oGvDQogICAgICAvLyAgICAgaWYgKCF0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbykgew0KICAgICAgLy8gICAgICAgdGhpcy4kbm90aWZ5Lndhcm5pbmcoew0KICAgICAgLy8gICAgICAgICB0aXRsZTogJ+aPkOekuicsDQogICAgICAvLyAgICAgICAgIG1lc3NhZ2U6ICfor7flhYjnmbvlvZXku6Xojrflj5blrozmlbTlip/og70nDQogICAgICAvLyAgICAgICB9KQ0KICAgICAgLy8gICAgICAgLy8g5Y+v5Lul6YCJ5oup5piv5ZCm57un57ut6Lez6L2sDQogICAgICAvLyAgICAgfQ0KICAgICAgLy8gICB9IGNhdGNoIChlcnIpIHsNCiAgICAgIC8vICAgICB0aGlzLiRub3RpZnkuZXJyb3Ioew0KICAgICAgLy8gICAgICAgdGl0bGU6ICfplJnor68nLA0KICAgICAgLy8gICAgICAgbWVzc2FnZTogJ+iOt+WPlueUqOaIt+S/oeaBr+Wksei0pe+8jOivt+eojeWQjumHjeivlScNCiAgICAgIC8vICAgICB9KQ0KICAgICAgLy8gICAgIHJldHVybiAvLyDojrflj5blpLHotKXliJnkuI3nu6fnu60NCiAgICAgIC8vICAgfQ0KICAgICAgLy8gfQ0KICAgICAgLy8gY29uc29sZS5sb2coY29sdW1uSWQpDQoNCiAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ2luZGV4JywgcXVlcnk6IHsgY29sdW1uSWQ6IGNvbHVtbklkIH0gfSkNCiAgICB9LA0KDQoNCiAgICBhc3luYyBnZXRDb2x1bW5zKCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgbGV0IGNvbHVtbnMgPSBhd2FpdCB0aGlzLiRhcGkoeyB0eXBlOiAnY29sdW1ucycgfSkNCiAgICAgICAgdGhpcy5jb2x1bW5zID0gY29sdW1ucy5saXN0DQogICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyDnrZvpgInpgInmi6nlpITnkIYNCiAgICBhc3luYyBoYW5kbGVGaWx0ZXJTZWxlY3QodHlwZSwgbGFiZWwsIHZhbHVlKSB7DQogICAgICBpZiAodHlwZSA9PT0gJ3llYXInKSB7DQogICAgICAgIC8vIOajgOafpeaYr+WQpuS4uuWMuumXtOWAvA0KICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucy55ZWFyID0gbGFiZWw7DQogICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZS5pbmNsdWRlcygnLScpKSB7DQogICAgICAgICAgdGhpcy5zZWxlY3RlZFllYXIgPSB2YWx1ZTsNCiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSkgew0KICAgICAgICAgIC8vIOWNleS4gOW5tOS7veWAvA0KICAgICAgICAgIHRoaXMuc2VsZWN0ZWRZZWFyID0gcGFyc2VJbnQodmFsdWUpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIC8vIOWFqOmDqOaIluWFtuS7luepuuWAvA0KICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zLnllYXIgPSBsYWJlbDsNCg0KICAgICAgICAgIHRoaXMuc2VsZWN0ZWRZZWFyID0gdmFsdWU7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3R5cGUnKSB7DQogICAgICAgIHRoaXMuc2VsZWN0ZWRUeXBlID0gdmFsdWU7DQogICAgICB9DQogICAgICAvLyDop6blj5HnrZvpgInlj5jljJYNCiAgICAgIGF3YWl0IHRoaXMuZW1pdEZpbHRlckNoYW5nZSgpOw0KICAgIH0sDQogICAgLy8g5Y+R6YCB562b6YCJ5p2h5Lu2DQogICAgYXN5bmMgZW1pdEZpbHRlckNoYW5nZSgpIHsNCiAgICAgIGNvbnN0IGZpbHRlcnMgPSB7DQogICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWRZZWFyLA0KICAgICAgICBjb2x1bW5JZDogdGhpcy5zZWxlY3RlZFR5cGUNCiAgICAgIH07DQoNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ2NvbHVtbicsIHF1ZXJ5OiBmaWx0ZXJzIH0pOw0KICAgIH0sDQogICAgaGFuZGxlUm91dGVDaGFuZ2UoKSB7DQogICAgICAvLyDmo4Dmn6Xmn6Xor6Llj4LmlbDmmK/lkKblj5HnlJ/lj5jljJYNCiAgICAgIGNvbnN0IG5ld0NvbHVtbiA9IHRoaXMuJHJvdXRlLnF1ZXJ5Py5jb2x1bW5JZCB8fCAnJzsNCiAgICAgIGNvbnN0IG5ld0RhdGUgPSB0aGlzLiRyb3V0ZS5xdWVyeT8uZGF0ZSB8fCB1bmRlZmluZWQ7DQoNCiAgICAgIC8vIOWmguaenOafpeivouWPguaVsOWPkeeUn+S6huWPmOWMlu+8jOmHjeaWsOWKoOi9veaVsOaNrg0KICAgICAgaWYgKHRoaXMucXVlcnkuY29sdW1uICE9PSBuZXdDb2x1bW4gfHwgdGhpcy5xdWVyeS5kYXRlICE9PSBuZXdEYXRlKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCfmn6Xor6Llj4LmlbDlj5HnlJ/kuoblj5jljJbvvIzph43mlrDliqDovb3mlbDmja4nKTsNCiAgICAgICAgdGhpcy5xdWVyeS5jb2x1bW4gPSBuZXdDb2x1bW47DQogICAgICAgIHRoaXMucXVlcnkuZGF0ZSA9IG5ld0RhdGU7DQogICAgICAgIHRoaXMuY2FuY2VsTW92aWVzKCk7DQogICAgICAgIGNvbnNvbGUubG9nKCfliqDovb3nlLXlvbHliJfooagnKTsNCiAgICAgICAgdGhpcy5nZXRNb3ZpZXMoKTsNCiAgICAgICAgY29uc29sZS5sb2coJ+WKoOi9veWujOaIkCcpDQogICAgICB9DQogICAgfSwNCg0KICAgIGdldE1vdmllcygpIHsNCiAgICAgIGNvbnNvbGUubG9nKCflvIDlp4vliqDovb3nlLXlvbHliJfooagnKQ0KICAgICAgbGV0IGRhdGEgPSB7IHNpemU6IHRoaXMuc2l6ZSwgcGFnZTogdGhpcy5wYWdlIH0NCiAgICAgIGxldCBxdWVyeSA9IHRoaXMuc2V0UXVlcnkoKQ0KICAgICAgaWYgKE9iamVjdC5lbnRyaWVzKHF1ZXJ5KS5sZW5ndGggPiAwKSB7DQogICAgICAgIGRhdGEucXVlcnkgPSBRUy5zdHJpbmdpZnkocXVlcnkpDQogICAgICB9DQogICAgICBjb25zb2xlLmxvZyhkYXRhKQ0KICAgICAgdGhpcy4kYXBpKHsgdHlwZTogJ21vdmllcycsIGRhdGEgfSkudGhlbihyZXN1bHQgPT4gew0KICAgICAgICAvLyDlhbPplK7kv67mlLnvvJrlnKjov5nph4zliKTmlq3mmK/lkKbmmL7npLo0MDTpobXpnaINCiAgICAgICAgaWYgKHJlc3VsdC5saXN0Lmxlbmd0aCA9PT0gMCAmJiB0aGlzLnBhZ2UgPT09IDEpIHsNCiAgICAgICAgICB0aGlzLnNob3c0MDQgPSB0cnVlOw0KICAgICAgICAgIHRoaXMubW92aWVzID0gW107DQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5tb3ZpZXMubGVuZ3RoID49IHJlc3VsdC50b3RhbCkgew0KICAgICAgICAgIC8vIOayoeacieabtOWkmuS6hg0KICAgICAgICAgIGNvbnNvbGUubG9nKCfmsqHmnInmm7TlpJrkuoYnKQ0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIC8vIOato+W4uOaYvuekuuaWh+eroA0KICAgICAgICAgIHRoaXMuc2hvdzQwNCA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMubW92aWVzLnB1c2goLi4ucmVzdWx0Lmxpc3QpDQogICAgICAgICAgY29uc29sZS5sb2codGhpcy5tb3ZpZXMpDQogICAgICAgICAgdGhpcy5jbG9zZUxvYWRDbG9jaygpIC8v6LCD55So54i257uE5Lu2cHJvdmlkZeS8oOmAkueahOWFs+mXrWxvYWTplIHmlrnms5UNCiAgICAgICAgICB0aGlzLnBhZ2UrKw0KICAgICAgICB9DQogICAgICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3Ioew0KICAgICAgICAgIHRpdGxlOiAn6I635Y+W5aSx6LSlJywNCiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KDQogICAgc2V0UXVlcnkoKSB7DQogICAgICBjb25zdCBkYXRlID0gdGhpcy4kcm91dGUucXVlcnk/LmRhdGUgPyBTdHJpbmcodGhpcy4kcm91dGUucXVlcnkuZGF0ZSkgOiB1bmRlZmluZWQ7DQogICAgICBjb25zdCBjb2x1bW4gPSB0aGlzLiRyb3V0ZS5xdWVyeT8uY29sdW1uSWQgfHwgdW5kZWZpbmVkOw0KDQogICAgICBsZXQgcXVlcnkgPSB7fTsNCg0KICAgICAgLy8g5aSE55CG5qCP55uu562b6YCJDQogICAgICBpZiAoY29sdW1uKSB7DQogICAgICAgIHF1ZXJ5LmNvbHVtbiA9IGNvbHVtbjsNCiAgICAgIH0NCg0KICAgICAgLy8g5aSE55CG5bm05Lu9562b6YCJDQogICAgICBpZiAoZGF0ZSkgew0KICAgICAgICAvLyDmo4Dmn6XmmK/lkKbkuLrljLrpl7TlgLwNCiAgICAgICAgaWYgKGRhdGUuaW5jbHVkZXMoJy0nKSkgew0KICAgICAgICAgIC8vIOino+aekOWMuumXtOWAvO+8jOWmgiAnMjAxMC0yMDE5Jw0KICAgICAgICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IGRhdGUuc3BsaXQoJy0nKS5tYXAoTnVtYmVyKTsNCiAgICAgICAgICBxdWVyeS5kYXRlID0gew0KICAgICAgICAgICAgJGd0ZTogc3RhcnQsICAvLyDlpKfkuo7nrYnkuo7lvIDlp4vlubTku70NCiAgICAgICAgICAgICRsdGU6IGVuZCAgICAgLy8g5bCP5LqO562J5LqO57uT5p2f5bm05Lu9DQogICAgICAgICAgfTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAvLyDljZXkuIDlubTku70NCiAgICAgICAgICBjb25zdCB5ZWFyID0gcGFyc2VJbnQoZGF0ZSk7DQogICAgICAgICAgaWYgKCFpc05hTih5ZWFyKSkgew0KICAgICAgICAgICAgcXVlcnkuZGF0ZSA9IHllYXI7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIHJldHVybiBxdWVyeTsNCiAgICB9LA0KDQogICAgY2FuY2VsTW92aWVzKCkgew0KICAgICAgdGhpcy5wYWdlID0gMQ0KICAgICAgdGhpcy5tb3ZpZXMgPSBbXQ0KICAgIH0sDQogIH0sDQoNCg0KfTsNCg=="},{"version":3,"sources":["Column.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA","file":"Column.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"movie-filter\">\r\n    <!-- 年份筛选 -->\r\n    <div class=\"filter-group\">\r\n      <div class=\"filter-label\">年份</div>\r\n      <div class=\"filter-options\">\r\n        <span v-for=\"year in yearOptions\" :key=\"year.value\"\r\n          :class=\"['filter-option', { active: selectedOptions.year === year.label }]\"\r\n          @click=\"handleFilterSelect('year', year.label, year.value)\">\r\n          {{ year.label }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 类型筛选（关联columns分类数据） -->\r\n    <div class=\"filter-group\">\r\n      <div class=\"filter-label\">类型</div>\r\n      <div class=\"filter-options\">\r\n        <span v-for=\"item in columnWords\" :key=\"item.value\"\r\n          :class=\"['filter-option', { active: selectedType === item.id }]\"\r\n          @click=\"handleFilterSelect('type', item.label, item.id)\">\r\n          {{ item.name }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <div class=\"blog-content\" v-if=\"!show404 && movies\">\r\n      <div class=\"blog-content--item\" v-for=\"item in movies\" :key=\"item.id\">\r\n        <router-link :to=\"{ name: 'movie', params: { id: item._id } }\">\r\n          <MovieItem :movie=\"item\" />\r\n        </router-link>\r\n      </div>\r\n    </div>\r\n    <div class=\"base404\" v-else>\r\n      <Base404  />\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MovieItem from '@/components/movie/MovieItem'\r\nimport Base404 from '@/components/base/Base404.vue';\r\nimport QS from 'qs'\r\nexport default {\r\n  name: 'MovieFilter',\r\n  inject: ['closeLoadClock'],\r\n  data() {\r\n    return {\r\n      // 年份选项（2000-2025，包含区间）\r\n      yearOptions: [\r\n        { label: '全部', value: null },\r\n        { label: '2025', value: '2025' },\r\n        { label: '2024', value: '2024' },\r\n        { label: '2023', value: '2023' },\r\n        { label: '2022', value: '2022' },\r\n        { label: '2021', value: '2021' },\r\n        { label: '2020', value: '2020' },\r\n        { label: '2010-2019', value: '2010-2019', start: 2010, end: 2019 },\r\n        { label: '2000-2009', value: '2000-2009', start: 2000, end: 2009 }\r\n      ],\r\n      // 选中的筛选条件\r\n      selectedOptions: {\r\n        year: '全部',\r\n        type: ''\r\n      },\r\n      selectedYear: null,\r\n      selectedType: '',\r\n      columns: [],\r\n      movies: [],\r\n      // 添加缺失的属性\r\n      size: 20,\r\n      page: 1,\r\n      show404: false,\r\n      query: {\r\n        column: '',\r\n        date: ''\r\n      }\r\n    };\r\n  },\r\n  components: {\r\n    MovieItem, Base404\r\n  },\r\n  activated() {\r\n    if (this.$route.query?.columnId) {\r\n      this.query.column = this.$route.query?.columnId\r\n    }\r\n  },\r\n\r\n  deactivated() {\r\n    this.query = {\r\n      column: '',\r\n      date: '',\r\n    }\r\n  },\r\n  created() {\r\n    this.getColumns()\r\n    this.getMovies()\r\n  },\r\n  mounted() {\r\n    this.$EventBus.$on('updateView', () => {\r\n      this.getColumns()\r\n      this.getMovies()\r\n    })\r\n  },\r\n  watch: {\r\n    $route: {\r\n      handler() {\r\n        this.handleRouteChange()\r\n\r\n      },\r\n\r\n      immediate: true\r\n    }\r\n  },\r\n  computed: {\r\n    columnWords() {\r\n      return this.columns.map(item => {\r\n\r\n        return {\r\n          name: item.name,\r\n          value: item.aids.length || 0,\r\n          id: item._id\r\n        }\r\n      })\r\n    },\r\n\r\n  },\r\n  methods: {\r\n    async wordClickHandler(name) {\r\n\r\n      // let columnId = this.columns.find(item => {\r\n      //   return item.name === name\r\n      // })?._id\r\n      // console.log(this.$store.state.userInfo)\r\n      // if (!this.$store.state.userInfo) {\r\n      //   try {\r\n      //     await this.$store.dispatch('getUserInfo')\r\n      //     // 再次检查是否获取到用户信息\r\n      //     if (!this.$store.state.userInfo) {\r\n      //       this.$notify.warning({\r\n      //         title: '提示',\r\n      //         message: '请先登录以获取完整功能'\r\n      //       })\r\n      //       // 可以选择是否继续跳转\r\n      //     }\r\n      //   } catch (err) {\r\n      //     this.$notify.error({\r\n      //       title: '错误',\r\n      //       message: '获取用户信息失败，请稍后重试'\r\n      //     })\r\n      //     return // 获取失败则不继续\r\n      //   }\r\n      // }\r\n      // console.log(columnId)\r\n\r\n      // this.$router.push({ name: 'index', query: { columnId: columnId } })\r\n    },\r\n\r\n\r\n    async getColumns() {\r\n      try {\r\n        let columns = await this.$api({ type: 'columns' })\r\n        this.columns = columns.list\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n    },\r\n\r\n    // 筛选选择处理\r\n    async handleFilterSelect(type, label, value) {\r\n      if (type === 'year') {\r\n        // 检查是否为区间值\r\n        this.selectedOptions.year = label;\r\n        if (value && value.includes('-')) {\r\n          this.selectedYear = value;\r\n        } else if (value) {\r\n          // 单一年份值\r\n          this.selectedYear = parseInt(value);\r\n        } else {\r\n          // 全部或其他空值\r\n          this.selectedOptions.year = label;\r\n\r\n          this.selectedYear = value;\r\n        }\r\n      } else if (type === 'type') {\r\n        this.selectedType = value;\r\n      }\r\n      // 触发筛选变化\r\n      await this.emitFilterChange();\r\n    },\r\n    // 发送筛选条件\r\n    async emitFilterChange() {\r\n      const filters = {\r\n        date: this.selectedYear,\r\n        columnId: this.selectedType\r\n      };\r\n\r\n      this.$router.push({ name: 'column', query: filters });\r\n    },\r\n    handleRouteChange() {\r\n      // 检查查询参数是否发生变化\r\n      const newColumn = this.$route.query?.columnId || '';\r\n      const newDate = this.$route.query?.date || undefined;\r\n\r\n      // 如果查询参数发生了变化，重新加载数据\r\n      if (this.query.column !== newColumn || this.query.date !== newDate) {\r\n        console.log('查询参数发生了变化，重新加载数据');\r\n        this.query.column = newColumn;\r\n        this.query.date = newDate;\r\n        this.cancelMovies();\r\n        console.log('加载电影列表');\r\n        this.getMovies();\r\n        console.log('加载完成')\r\n      }\r\n    },\r\n\r\n    getMovies() {\r\n      console.log('开始加载电影列表')\r\n      let data = { size: this.size, page: this.page }\r\n      let query = this.setQuery()\r\n      if (Object.entries(query).length > 0) {\r\n        data.query = QS.stringify(query)\r\n      }\r\n      console.log(data)\r\n      this.$api({ type: 'movies', data }).then(result => {\r\n        // 关键修改：在这里判断是否显示404页面\r\n        if (result.list.length === 0 && this.page === 1) {\r\n          this.show404 = true;\r\n          this.movies = [];\r\n        } else if (this.movies.length >= result.total) {\r\n          // 没有更多了\r\n          console.log('没有更多了')\r\n          return\r\n        } else {\r\n          // 正常显示文章\r\n          this.show404 = false;\r\n          this.movies.push(...result.list)\r\n          console.log(this.movies)\r\n          this.closeLoadClock() //调用父组件provide传递的关闭load锁方法\r\n          this.page++\r\n        }\r\n      }).catch(err => {\r\n        this.$notify.error({\r\n          title: '获取失败',\r\n          message: err.message\r\n        })\r\n      })\r\n    },\r\n\r\n    setQuery() {\r\n      const date = this.$route.query?.date ? String(this.$route.query.date) : undefined;\r\n      const column = this.$route.query?.columnId || undefined;\r\n\r\n      let query = {};\r\n\r\n      // 处理栏目筛选\r\n      if (column) {\r\n        query.column = column;\r\n      }\r\n\r\n      // 处理年份筛选\r\n      if (date) {\r\n        // 检查是否为区间值\r\n        if (date.includes('-')) {\r\n          // 解析区间值，如 '2010-2019'\r\n          const [start, end] = date.split('-').map(Number);\r\n          query.date = {\r\n            $gte: start,  // 大于等于开始年份\r\n            $lte: end     // 小于等于结束年份\r\n          };\r\n        } else {\r\n          // 单一年份\r\n          const year = parseInt(date);\r\n          if (!isNaN(year)) {\r\n            query.date = year;\r\n          }\r\n        }\r\n      }\r\n\r\n      return query;\r\n    },\r\n\r\n    cancelMovies() {\r\n      this.page = 1\r\n      this.movies = []\r\n    },\r\n  },\r\n\r\n\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n// 主题变量（与网站统一）\r\n$primary = #E50914\r\n$light-black = #252525 // 浅黑背景\r\n$lighter-black = #333333 // 更浅黑色\r\n$light = #F8F8F8 // 浅色文字\r\n$gray = #AAAAAA // 次级文字\r\n$transition = all 0.2s ease\r\n\r\n// 筛选容器\r\n.movie-filter\r\n  background-color: $lighter-black\r\n  border-radius: 8px\r\n  padding: 20px\r\n  margin: 20px 0\r\n  box-shadow: 0 3px 10px rgba(0,0,0,0.2)\r\n\r\n// 单个筛选组\r\n.filter-group\r\n  margin-bottom: 25px\r\n  &:last-of-type\r\n    margin-bottom: 0\r\n\r\n// 筛选标签（年份/类型）\r\n.filter-label\r\n  font-size: 18px\r\n  font-weight: 600\r\n  color: $primary\r\n  margin-bottom: 15px\r\n  display: block\r\n\r\n// 筛选选项容器\r\n.filter-options\r\n  display: flex\r\n  flex-wrap: wrap\r\n  gap: 12px\r\n\r\n// 筛选选项（标签式）\r\n.filter-option\r\n  padding: 8px 16px\r\n  background-color: $light-black\r\n  border-radius: 20px\r\n  color: $light\r\n  font-size: 14px\r\n  cursor: pointer\r\n  transition: $transition\r\n  border: 1px solid transparent\r\n  &:hover\r\n    background-color: #444\r\n    color: $primary\r\n  // 选中状态（参考示例红色背景）\r\n  &.active\r\n    background-color: $primary\r\n    color: white\r\n    border-color: $primary\r\n    &:hover\r\n      background-color: #C00812\r\n\r\n// 响应式适配\r\n@media (max-width: 768px) \r\n  .movie-filter\r\n    padding: 15px\r\n  .filter-label\r\n    font-size: 16px\r\n  .filter-option\r\n    padding: 6px 12px\r\n    font-size: 13px\r\n  .filter-options\r\n    gap: 8px\r\n  \r\n</style>"]}]}