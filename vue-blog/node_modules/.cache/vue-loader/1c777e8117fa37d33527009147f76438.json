{"remainingRequest":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\githubdesk\\Vue-blog\\vue-blog\\src\\views\\Socket.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\src\\views\\Socket.vue","mtime":1762832105363},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBpbyB9IGZyb20gJ3NvY2tldC5pby1jbGllbnQnDQppbXBvcnQgZm9ybWF0RGF0ZSBmcm9tICdAL3V0aWwvZm9ybWF0RGF0ZScNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnU29ja2V0Q2hhdCcsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNlbmRNc2c6ICcnLA0KICAgICAgY2hhdExpc3Q6IFtdLA0KICAgICAgbmlrbmFtZTogJycsDQogICAgICB3czogbnVsbCwNCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLiRzdG9yZS5jb21taXQoJ1JJR0hUX0xJVkUyRF9ESVMnKQ0KICAgIHRoaXMuZ2V0TmlrbmFtZSgpDQoNCiAgICAvLyDov57mjqVTb2NrZXQNCiAgICB0aGlzLndzID0gaW8oIndzOi8vMTI3LjAuMC4xOjg4ODgiLCB7IHRyYW5zcG9ydHM6IFsnd2Vic29ja2V0J10gfSkNCg0KICAgIHRoaXMud3Mub24oJ2Nvbm5lY3QnLCAoKSA9PiB7DQogICAgICBjb25zb2xlLmxvZygn5bu656uL6L+e5o6lJykNCiAgICAgIC8vIOW3sueZu+W9leeUqOaIt+iHquWKqOWPkemAgeeZu+W9leeKtuaAgQ0KICAgICAgaWYgKHRoaXMubmlrbmFtZSkgew0KICAgICAgICB0aGlzLndzLmVtaXQoJ2xvZ2luJywgdGhpcy5uaWtuYW1lKQ0KICAgICAgfQ0KICAgIH0pDQoNCiAgICB0aGlzLndzLm9uKCdjaGF0JywgKGRhdGEpID0+IHsNCiAgICAgIHRoaXMuc2VydmVyQ2hhdChkYXRhKQ0KICAgIH0pDQoNCiAgICB0aGlzLndzLm9uKCdsb2dvdXQnLCAobmlrbmFtZSkgPT4gew0KICAgICAgdGhpcy5zZXJ2ZXJMb2coeyBuaWtuYW1lLCBpc0xvZ2luOiBmYWxzZSB9KQ0KICAgIH0pDQoNCiAgICB0aGlzLndzLm9uKCdsb2dnZWQnLCAobmlrbmFtZSkgPT4gew0KICAgICAgdGhpcy5zZXJ2ZXJMb2coeyBuaWtuYW1lLCBpc0xvZ2luOiB0cnVlIH0pDQogICAgfSkNCg0KICAgIC8vIOebkeWQrOi/nuaOpemUmeivrw0KICAgIHRoaXMud3Mub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7DQogICAgICBjb25zb2xlLmVycm9yKCdTb2NrZXTov57mjqXplJnor686JywgZXJyb3IpDQogICAgICB0aGlzLmFkZENoYXQoew0KICAgICAgICB0eXBlOiAnYWN0aW9uJywNCiAgICAgICAgbXNnOiAn6L+e5o6l6IGK5aSp5a6k5aSx6LSl77yM6K+35Yi35paw6aG16Z2i6YeN6K+VJw0KICAgICAgfSkNCiAgICB9KQ0KICB9LA0KICBiZWZvcmVEZXN0cm95KCkgew0KICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnTEVGVF9MSVZFMkRfRElTJykNCiAgICAvLyDlhbPpl61zb2NrZXTov57mjqUNCiAgICBpZiAodGhpcy53cykgew0KICAgICAgdGhpcy53cy5jbG9zZSgpDQogICAgfQ0KICB9LA0KICB1cGRhdGVkKCkgew0KICAgIC8vIOa7muWKqOWIsOW6lemDqA0KICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcuYmxvZy1jaGF0LS1jb250ZW50JykNCiAgICBpZiAoY29udGVudCkgew0KICAgICAgY29udGVudC5zY3JvbGxUb3AgPSBjb250ZW50LnNjcm9sbEhlaWdodA0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldE5pa25hbWUoKSB7DQogICAgICBsZXQgbmlrbmFtZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMudXNlckluZm8/Lm5pa25hbWUNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9ICFuaWtuYW1lDQogICAgICB0aGlzLm5pa25hbWUgPSBuaWtuYW1lIHx8ICcnDQogICAgfSwNCiAgICBsb2dpbigpIHsNCiAgICAgIGlmICghdGhpcy5uaWtuYW1lLnRyaW0oKSkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+i+k+WFpeacieaViOeahOaYteensCcpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgdGhpcy53cy5lbWl0KCdsb2dpbicsIHRoaXMubmlrbmFtZS50cmltKCkpDQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgLy8g5L+d5a2Y5pi156ew5Yiwc3RvcmUNCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnU0VUX1VTRVJfSU5GTycsIHsNCiAgICAgICAgLi4udGhpcy4kc3RvcmUuZ2V0dGVycy51c2VySW5mbywNCiAgICAgICAgbmlrbmFtZTogdGhpcy5uaWtuYW1lLnRyaW0oKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGFkZENoYXQoew0KICAgICAgdHlwZSA9ICJtc2ciLA0KICAgICAgbXNnID0gIiIsDQogICAgICBuaWtuYW1lID0gJycsDQogICAgICB0aW1lID0gZm9ybWF0RGF0ZSgpLA0KICAgICAgaXNNZSA9IGZhbHNlDQogICAgfSkgew0KICAgICAgbGV0IGRpcyA9ICdsZWZ0Jw0KICAgICAgaWYgKHR5cGUgPT09ICdhY3Rpb24nKSB7DQogICAgICAgIGRpcyA9ICdjZW50ZXInDQogICAgICB9DQogICAgICBpZiAoaXNNZSkgew0KICAgICAgICBkaXMgPSAncmlnaHQnDQogICAgICB9DQogICAgICB0aGlzLmNoYXRMaXN0LnB1c2goew0KICAgICAgICB0eXBlLCBtc2csIG5pa25hbWUsIHRpbWUsIGlzTWUsIGRpcw0KICAgICAgfSkNCiAgICB9LA0KICAgIHNlbmRDaGF0KCkgew0KICAgICAgY29uc3QgbXNnID0gdGhpcy5zZW5kTXNnLnRyaW0oKQ0KICAgICAgaWYgKCFtc2cpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fovpPlhaXogYrlpKnlhoXlrrknKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlmICghdGhpcy5uaWtuYW1lKSB7DQogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQoNCiAgICAgIHRoaXMuYWRkQ2hhdCh7DQogICAgICAgIGlzTWU6IHRydWUsDQogICAgICAgIG1zZywNCiAgICAgICAgbmlrbmFtZTogdGhpcy5uaWtuYW1lDQogICAgICB9KQ0KICAgICAgdGhpcy53cy5lbWl0KCdzZW5kJywgew0KICAgICAgICBtc2csDQogICAgICAgIG5pa25hbWU6IHRoaXMubmlrbmFtZSwNCiAgICAgICAgdGltZTogZm9ybWF0RGF0ZSgpDQogICAgICB9KQ0KICAgICAgdGhpcy5zZW5kTXNnID0gJycNCiAgICB9LA0KICAgIHNlcnZlckNoYXQoZGF0YSkgew0KICAgICAgLy8g6Kej5p6E5pe25aKe5Yqg5a656ZSZ77yM6YG/5YWN5a2X5q6157y65aSx5a+86Ie05pi+56S65Yy/5ZCNDQogICAgICBjb25zb2xlLmxvZygn5o6l5pS25Yiw5pyN5Yqh5Zmo5raI5oGv77yaJywgZGF0YSk7DQogICAgICBjb25zdCB7IG1zZyA9ICcnLCBuaWtuYW1lID0gJycsIHRpbWUgPSAnJyB9ID0gZGF0YSB8fCB7fTsNCiAgICAgIC8vIOaWsOWinu+8muWmguaenCBuaWtuYW1lIOS4uuepuu+8jOaYvuekuuOAjOacquefpeeUqOaIt+OAje+8iOavlOWMv+WQjeeUqOaIt+abtOWHhuehru+8iQ0KICAgICAgY29uc3Qgc2hvd05pa25hbWUgPSBuaWtuYW1lLnRyaW0oKSB8fCAn5pyq55+l55So5oi3JzsNCg0KICAgICAgdGhpcy5hZGRDaGF0KHsNCiAgICAgICAgbmlrbmFtZTogc2hvd05pa25hbWUsDQogICAgICAgIG1zZzogbXNnLnRyaW0oKSB8fCAn56m65raI5oGvJywNCiAgICAgICAgdGltZTogdGltZSB8fCBmb3JtYXREYXRlKCkgLy8g5ZCO56uv5rKh5Lyg5pe26Ze05pe277yM5YmN56uv6KGl5YWoDQogICAgICB9KQ0KICAgIH0sDQogICAgc2VydmVyTG9nKHsgbmlrbmFtZSwgaXNMb2dpbiB9KSB7DQogICAgICBjb25zdCBzdGF0ZSA9IGlzTG9naW4gPyAn6L+b5YWlJyA6ICfnprvlvIAnDQogICAgICBjb25zdCBtc2cgPSBgJHtuaWtuYW1lfSAke3N0YXRlfeS6huiBiuWkqeWupGANCiAgICAgIHRoaXMuYWRkQ2hhdCh7DQogICAgICAgIHR5cGU6ICdhY3Rpb24nLCBtc2cNCiAgICAgIH0pDQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["Socket.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Socket.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"blog-chat\">\r\n    <div class=\"blog-chat--header\">\r\n      <i class=\"el-icon-comments\"></i>\r\n      <span>实时聊天室</span>\r\n    </div>\r\n    <div class=\"blog-chat--content\">\r\n      <div class=\"blog-chat--item\" :class=\"chat.dis\" v-for=\"chat in chatList\" :key=\"chat.time + chat.nikname\">\r\n\r\n        <span v-if=\"chat.nikname && chat.type !== 'action'\" class=\"blog-chat--nikname\">{{ chat.nikname }}</span>\r\n        <div class=\"blog-chat--box\" :class=\"{ action: chat.type === 'action' }\">\r\n          <span class=\"blog-chat--time\" v-if=\"chat.time && chat.type !== 'action'\">{{ chat.time }}</span>\r\n          <p class=\"blog-chat--msg\" v-if=\"chat.msg\">{{ chat.msg }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"blog-chat--bottom\">\r\n      <el-input v-model=\"sendMsg\" placeholder=\"请输入聊天内容...\" class=\"chat-input\" @keyup.enter=\"sendChat\">\r\n      </el-input>\r\n      <el-button type=\"primary\" @click=\"sendChat\" icon=\"el-icon-position\" class=\"send-btn\">\r\n        发送\r\n      </el-button>\r\n    </div>\r\n\r\n    <el-dialog title=\"设置昵称\" :visible=\"dialogVisible\" width=\"30%\" :close-on-click-modal=\"false\">\r\n      <el-input v-model=\"nikname\" placeholder=\"请输入你的昵称\" :maxlength=\"10\" show-word-limit>\r\n      </el-input>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"login\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { io } from 'socket.io-client'\r\nimport formatDate from '@/util/formatDate'\r\n\r\nexport default {\r\n  name: 'SocketChat',\r\n  data() {\r\n    return {\r\n      sendMsg: '',\r\n      chatList: [],\r\n      nikname: '',\r\n      ws: null,\r\n      dialogVisible: false\r\n    };\r\n  },\r\n  created() {\r\n    this.$store.commit('RIGHT_LIVE2D_DIS')\r\n    this.getNikname()\r\n\r\n    // 连接Socket\r\n    this.ws = io(\"ws://127.0.0.1:8888\", { transports: ['websocket'] })\r\n\r\n    this.ws.on('connect', () => {\r\n      console.log('建立连接')\r\n      // 已登录用户自动发送登录状态\r\n      if (this.nikname) {\r\n        this.ws.emit('login', this.nikname)\r\n      }\r\n    })\r\n\r\n    this.ws.on('chat', (data) => {\r\n      this.serverChat(data)\r\n    })\r\n\r\n    this.ws.on('logout', (nikname) => {\r\n      this.serverLog({ nikname, isLogin: false })\r\n    })\r\n\r\n    this.ws.on('logged', (nikname) => {\r\n      this.serverLog({ nikname, isLogin: true })\r\n    })\r\n\r\n    // 监听连接错误\r\n    this.ws.on('error', (error) => {\r\n      console.error('Socket连接错误:', error)\r\n      this.addChat({\r\n        type: 'action',\r\n        msg: '连接聊天室失败，请刷新页面重试'\r\n      })\r\n    })\r\n  },\r\n  beforeDestroy() {\r\n    this.$store.commit('LEFT_LIVE2D_DIS')\r\n    // 关闭socket连接\r\n    if (this.ws) {\r\n      this.ws.close()\r\n    }\r\n  },\r\n  updated() {\r\n    // 滚动到底部\r\n    const content = this.$el.querySelector('.blog-chat--content')\r\n    if (content) {\r\n      content.scrollTop = content.scrollHeight\r\n    }\r\n  },\r\n  methods: {\r\n    getNikname() {\r\n      let nikname = this.$store.getters.userInfo?.nikname\r\n      this.dialogVisible = !nikname\r\n      this.nikname = nikname || ''\r\n    },\r\n    login() {\r\n      if (!this.nikname.trim()) {\r\n        this.$message.warning('请输入有效的昵称')\r\n        return\r\n      }\r\n      this.ws.emit('login', this.nikname.trim())\r\n      this.dialogVisible = false\r\n      // 保存昵称到store\r\n      this.$store.commit('SET_USER_INFO', {\r\n        ...this.$store.getters.userInfo,\r\n        nikname: this.nikname.trim()\r\n      })\r\n    },\r\n    addChat({\r\n      type = \"msg\",\r\n      msg = \"\",\r\n      nikname = '',\r\n      time = formatDate(),\r\n      isMe = false\r\n    }) {\r\n      let dis = 'left'\r\n      if (type === 'action') {\r\n        dis = 'center'\r\n      }\r\n      if (isMe) {\r\n        dis = 'right'\r\n      }\r\n      this.chatList.push({\r\n        type, msg, nikname, time, isMe, dis\r\n      })\r\n    },\r\n    sendChat() {\r\n      const msg = this.sendMsg.trim()\r\n      if (!msg) {\r\n        this.$message.warning('请输入聊天内容')\r\n        return\r\n      }\r\n      if (!this.nikname) {\r\n        this.dialogVisible = true\r\n        return\r\n      }\r\n\r\n      this.addChat({\r\n        isMe: true,\r\n        msg,\r\n        nikname: this.nikname\r\n      })\r\n      this.ws.emit('send', {\r\n        msg,\r\n        nikname: this.nikname,\r\n        time: formatDate()\r\n      })\r\n      this.sendMsg = ''\r\n    },\r\n    serverChat(data) {\r\n      // 解构时增加容错，避免字段缺失导致显示匿名\r\n      console.log('接收到服务器消息：', data);\r\n      const { msg = '', nikname = '', time = '' } = data || {};\r\n      // 新增：如果 nikname 为空，显示「未知用户」（比匿名用户更准确）\r\n      const showNikname = nikname.trim() || '未知用户';\r\n\r\n      this.addChat({\r\n        nikname: showNikname,\r\n        msg: msg.trim() || '空消息',\r\n        time: time || formatDate() // 后端没传时间时，前端补全\r\n      })\r\n    },\r\n    serverLog({ nikname, isLogin }) {\r\n      const state = isLogin ? '进入' : '离开'\r\n      const msg = `${nikname} ${state}了聊天室`\r\n      this.addChat({\r\n        type: 'action', msg\r\n      })\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n// 全局样式变量\r\n$primary-color = #409EFF\r\n$secondary-color = #67C23A\r\n$gray-light = #F5F7FA\r\n$gray = #C0C4CC\r\n$gray-dark = #909399\r\n$text-color = #303133\r\n$bg-color = #F7F9FC\r\n$border-radius = 18px\r\n$shadow = 0 2px 12px rgba(0, 0, 0, 0.08)\r\n\r\n.blog-chat\r\n  display flex\r\n  flex-direction column\r\n  width 100%\r\n  max-width 800px  // 限制最大宽度\r\n  margin 10px auto\r\n  background-color #fff\r\n  border-radius 12px\r\n  box-shadow 0 4px 20px rgba(0, 0, 0, 0.1)\r\n  height 68vh\r\n  overflow hidden\r\n  transition all 0.3s ease\r\n\r\n  // 响应式调整\r\n  @media (max-width: 768px)\r\n    width 95%\r\n    height 75vh\r\n\r\n.blog-chat--header\r\n  display flex\r\n  align-items center\r\n  padding 16px 20px\r\n  background-color $primary-color\r\n  color #fff\r\n  font-size 18px\r\n  font-weight 500\r\n\r\n  i.el-icon-comments\r\n    margin-right 8px\r\n    font-size 20px\r\n\r\n.blog-chat--content\r\n  flex 1\r\n  padding 20px\r\n  overflow-y auto\r\n  background-color $bg-color\r\n  scroll-behavior smooth  // 平滑滚动\r\n\r\n  // 滚动条样式（如果需要隐藏，可注释这段）\r\n  &::-webkit-scrollbar\r\n    width 6px\r\n    height 6px\r\n\r\n  &::-webkit-scrollbar-thumb\r\n    background-color $gray\r\n    border-radius 3px\r\n\r\n  &::-webkit-scrollbar-track\r\n    background-color transparent\r\n\r\n// 修复核心：消息项容器样式\r\n.blog-chat--item\r\n  display flex\r\n  margin-bottom 16px\r\n  animation fadeIn 0.3s ease  // 消息出现动画\r\n  width: 100%  // 确保占满宽度\r\n\r\n  // 左侧消息（他人）- 靠左\r\n  &.left\r\n    justify-content: flex-start\r\n    flex-direction: row\r\n\r\n    .blog-chat--nikname\r\n      margin-right: 8px\r\n      color $gray-dark\r\n      font-size 12px\r\n      align-self: flex-start\r\n      margin-top: 2px\r\n\r\n    .blog-chat--box\r\n      background-color #fff\r\n      border 1px solid #E5E6EB\r\n      margin-left: 0  // 移除多余边距\r\n\r\n  // 右侧消息（自己）- 靠右（关键修复）\r\n  &.right\r\n    justify-content: flex-end  // 整体靠右\r\n    flex-direction: row  // 不需要反向，直接调整内部顺序\r\n    align-items: flex-start\r\n\r\n    // 自己的昵称在右边，所以margin-left\r\n    .blog-chat--nikname\r\n      margin-left: 8px\r\n      color $gray-dark\r\n      font-size 12px\r\n      align-self: flex-start\r\n      margin-top: 2px\r\n      order: 2  // 让昵称在消息框右边\r\n\r\n    .blog-chat--box\r\n      background-color $primary-color\r\n      color #fff\r\n      margin-right: 0  // 移除多余边距\r\n      order: 1  // 让消息框在昵称左边\r\n\r\n  // 中间系统消息\r\n  &.center\r\n    justify-content: center\r\n    flex-direction: row\r\n\r\n    .blog-chat--box\r\n      background-color #F0F2F5\r\n      color $gray-dark\r\n      font-size 13px\r\n      padding 6px 12px\r\n      border-radius 12px\r\n      max-width: 60%\r\n\r\n.blog-chat--nikname\r\n  font-size 12px\r\n  font-weight 500\r\n  margin-bottom 4px\r\n  display: inline-block\r\n\r\n.blog-chat--box\r\n  max-width: 70%  // 限制消息最大宽度\r\n  padding: 10px 14px\r\n  border-radius $border-radius\r\n  box-shadow $shadow\r\n  position: relative\r\n  transition all 0.2s ease\r\n  word-wrap: break-word  // 确保长文本换行\r\n\r\n  // 系统消息样式\r\n  &.action\r\n    background-color #F0F2F5\r\n    color $gray-dark\r\n    text-align: center\r\n    box-shadow: none\r\n    border-radius: 12px\r\n\r\n  // 气泡尖角 - 左侧消息\r\n  .left &::before\r\n    content: ''\r\n    position: absolute\r\n    left: -8px\r\n    top: 12px\r\n    width: 0\r\n    height: 0\r\n    border-top: 8px solid transparent\r\n    border-bottom: 8px solid transparent\r\n    border-right: 8px solid #fff\r\n    z-index: 1\r\n\r\n  // 气泡尖角 - 右侧消息（修复方向）\r\n  .right &::before\r\n    content: ''\r\n    position: absolute\r\n    right: -8px  // 尖角在右侧\r\n    top: 12px\r\n    width: 0\r\n    height: 0\r\n    border-top: 8px solid transparent\r\n    border-bottom: 8px solid transparent\r\n    border-left: 8px solid $primary-color  // 与自己消息框颜色一致\r\n    z-index: 1\r\n\r\n.blog-chat--time\r\n  font-size: 11px\r\n  color $gray\r\n  margin-bottom: 4px\r\n  display: block\r\n\r\n  // 自己消息的时间颜色\r\n  .right &\r\n    color: rgba(255, 255, 255, 0.7)\r\n\r\n.blog-chat--msg\r\n  font-size: 14px\r\n  line-height: 1.6\r\n  margin: 0\r\n  word-break: break-all  // 自动换行\r\n  white-space: normal\r\n\r\n.blog-chat--bottom\r\n  display: flex\r\n  gap: 12px\r\n  padding: 16px 20px\r\n  background-color #fff\r\n  border-top: 1px solid #F0F2F5\r\n  align-items: center  // 输入框和按钮垂直居中\r\n\r\n.chat-input\r\n  flex: 1\r\n  border-radius: 24px !important\r\n  border-color: #E5E6EB !important\r\n\r\n  &:focus-within\r\n    box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.2) !important\r\n\r\n.send-btn\r\n  border-radius: 24px !important\r\n  padding: 0 24px !important\r\n  height: 40px !important\r\n  font-size: 14px !important\r\n  transition all 0.2s ease\r\n\r\n  &:hover\r\n    background-color: #3391FF !important\r\n    transform: translateY(-1px)\r\n\r\n  &:active\r\n    transform: translateY(0)\r\n\r\n// 动画效果\r\n@keyframes fadeIn\r\n  from\r\n    opacity: 0\r\n    transform: translateY(10px)\r\n  to\r\n    opacity: 1\r\n    transform: translateY(0)\r\n\r\n// 对话框样式优化\r\n.el-dialog__header\r\n  background-color $primary-color\r\n  color: #fff !important\r\n  border-radius: 8px 8px 0 0\r\n\r\n.el-dialog__title\r\n  color: #fff !important\r\n  font-size: 16px !important\r\n\r\n.el-dialog__body\r\n  padding: 20px !important\r\n\r\n.el-input__inner\r\n  border-radius: 20px !important\r\n  height: 40px !important\r\n  line-height: 40px !important\r\n\r\n.el-button--primary\r\n  border-radius: 20px !important\r\n  padding: 0 20px !important\r\n\r\n// 兼容其他浏览器的滚动条隐藏（可选）\r\n@media screen and (-webkit-min-device-pixel-ratio: 0)\r\n  .blog-chat--content\r\n    scrollbar-width: none\r\n    -ms-overflow-style: none\r\n\r\n.blog-chat--content::-webkit-scrollbar\r\n  display: none !important\r\n</style>"]}]}