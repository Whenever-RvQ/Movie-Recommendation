{"remainingRequest":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\githubdesk\\Movie-Recommendation\\vue-blog\\src\\api\\http.js","dependencies":[{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\src\\api\\http.js","mtime":1762701438440},{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiRDovZ2l0aHViZGVzay9Nb3ZpZS1SZWNvbW1lbmRhdGlvbi92dWUtYmxvZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovZ2l0aHViZGVzay9Nb3ZpZS1SZWNvbW1lbmRhdGlvbi92dWUtYmxvZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBzZXJ2aWNlIGZyb20gJy4vY29tbW9uJzsKaW1wb3J0IHN0b3JlIGZyb20gJ3N0b3JlJzsKaW1wb3J0IEFQSV9MSVNUIGZyb20gJ0AvY29uZmlnL2FwaS5jb25maWcnOwppbXBvcnQgYmFzZSBmcm9tICdAL2NvbmZpZy9iYXNlLmNvbmZpZyc7CmltcG9ydCBlbmNyeXB0IGZyb20gJ0AvdXRpbC9lbmNyeXB0JzsKdmFyIFRPS0VOX05BTUUgPSBiYXNlLlRPS0VOX05BTUU7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEh0dHAoX3gpIHsKICByZXR1cm4gX0h0dHAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX0h0dHAoKSB7CiAgX0h0dHAgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoX3JlZikgewogICAgdmFyIHR5cGUsIGRhdGEsIHBhcmFtcywgX0FQSV9MSVNUJHR5cGUsIHVybCwgbWV0aG9kLCBfQVBJX0xJU1QkdHlwZSRub01lc3MsIG5vTWVzc2FnZSwgX0FQSV9MSVNUJHR5cGUkcnNhS2V5LCByc2FLZXksIF9BUElfTElTVCR0eXBlJHJlc3QsIHJlc3QsIF9BUElfTElTVCR0eXBlJHNldFRvaywgc2V0VG9rZW4sIHJlc3RTeW1ib2wsIHJlc3VsdCwgdG9rZW4sIHVpZCwgbWVzc2FnZTsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHR5cGUgPSBfcmVmLnR5cGUsIGRhdGEgPSBfcmVmLmRhdGEsIHBhcmFtcyA9IF9yZWYucGFyYW1zOwoKICAgICAgICAgICAgaWYgKHR5cGUgaW4gQVBJX0xJU1QpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBUEnor7fmsYLplJnor68nKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIF9BUElfTElTVCR0eXBlID0gQVBJX0xJU1RbdHlwZV0sIHVybCA9IF9BUElfTElTVCR0eXBlLnVybCwgbWV0aG9kID0gX0FQSV9MSVNUJHR5cGUubWV0aG9kLCBfQVBJX0xJU1QkdHlwZSRub01lc3MgPSBfQVBJX0xJU1QkdHlwZS5ub01lc3NhZ2UsIG5vTWVzc2FnZSA9IF9BUElfTElTVCR0eXBlJG5vTWVzcyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfQVBJX0xJU1QkdHlwZSRub01lc3MsIF9BUElfTElTVCR0eXBlJHJzYUtleSA9IF9BUElfTElTVCR0eXBlLnJzYUtleSwgcnNhS2V5ID0gX0FQSV9MSVNUJHR5cGUkcnNhS2V5ID09PSB2b2lkIDAgPyBmYWxzZSA6IF9BUElfTElTVCR0eXBlJHJzYUtleSwgX0FQSV9MSVNUJHR5cGUkcmVzdCA9IF9BUElfTElTVCR0eXBlLnJlc3QsIHJlc3QgPSBfQVBJX0xJU1QkdHlwZSRyZXN0ID09PSB2b2lkIDAgPyBmYWxzZSA6IF9BUElfTElTVCR0eXBlJHJlc3QsIF9BUElfTElTVCR0eXBlJHNldFRvayA9IF9BUElfTElTVCR0eXBlLnNldFRva2VuLCBzZXRUb2tlbiA9IF9BUElfTElTVCR0eXBlJHNldFRvayA9PT0gdm9pZCAwID8gZmFsc2UgOiBfQVBJX0xJU1QkdHlwZSRzZXRUb2s7CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA0OwogICAgICAgICAgICBtZXRob2QgPSBtZXRob2QudG9Mb3dlckNhc2UoKTsgLy8g5aSE55CGIFJFU1Qg6aOO5qC855qE5Y+C5pWw5pu/5o2iICjljp/mnInnmoQgcmVzdCDlpITnkIbpgLvovpEpCgogICAgICAgICAgICBpZiAocmVzdCkgewogICAgICAgICAgICAgIHJlc3RTeW1ib2wgPSB1cmwubWF0Y2goLzooLiopJC8pWzFdOwogICAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKC86KC4qKSQvLCBkYXRhW3Jlc3RTeW1ib2xdKTsKICAgICAgICAgICAgfSAvLyDmlrDlop7vvJrlpITnkIbpgJrnlKjnmoTlj4LmlbDmm7/mjaIgKOeUqOS6jiBwdXRVc2VySW5mbyDnrYnmg4XlhrUpCiAgICAgICAgICAgIGVsc2UgaWYgKHBhcmFtcyAmJiBfdHlwZW9mKHBhcmFtcykgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAvLyDpgY3ljoYgcGFyYW1zIOWvueixoe+8jOabv+aNoiBVUkwg5Lit55qE5omA5pyJ5Y2g5L2N56ymCiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhwYXJhbXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSAnOicgKyBrZXk7CgogICAgICAgICAgICAgICAgICBpZiAodXJsLmluY2x1ZGVzKHBsYWNlaG9sZGVyKSkgewogICAgICAgICAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKHBsYWNlaG9sZGVyLCBwYXJhbXNba2V5XSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghKHJzYUtleSAmJiBkYXRhICYmIGRhdGFbcnNhS2V5XSkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgcmV0dXJuIGVuY3J5cHQoZGF0YVtyc2FLZXldKTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBkYXRhW3JzYUtleV0gPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIC8vIOagueaNruivt+axguaWueazleWkhOeQhuaVsOaNrgogICAgICAgICAgICBkYXRhID0gbWV0aG9kID09PSAnZ2V0JyA/IHsKICAgICAgICAgICAgICBwYXJhbXM6IGRhdGEKICAgICAgICAgICAgfSA6IGRhdGE7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VbbWV0aG9kXSh1cmwsIGRhdGEpOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICBpZiAoc2V0VG9rZW4gJiYgcmVzdWx0KSB7CiAgICAgICAgICAgICAgdG9rZW4gPSByZXN1bHQudG9rZW47CiAgICAgICAgICAgICAgdWlkID0gcmVzdWx0LnVzZXJJZDsKICAgICAgICAgICAgICBzdG9yZS5zZXQoJ3VpZCcsIHVpZCk7IC8v5pys5Zyw5a2Y5YKodG9rZW4KCiAgICAgICAgICAgICAgc3RvcmUuc2V0KFRPS0VOX05BTUUsIHRva2VuKTsgLy8g56Gu5L+dIHRoaXMg5a2Y5Zyo5YaN6LCD55SoCgogICAgICAgICAgICAgIGlmICh0aGlzICYmIHRoaXMuJHN0b3JlKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbG9naW4nKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3VsdCk7CgogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE5OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDQpOwoKICAgICAgICAgICAgaWYgKF9jb250ZXh0LnQwLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgbWVzc2FnZSA9IF9jb250ZXh0LnQwLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKCiAgICAgICAgICAgICAgaWYgKCFub01lc3NhZ2UpIHsKICAgICAgICAgICAgICAgIC8vaHR0cOWHveaVsOS9nOS4uuaPkuS7tuaMgui9veWIsOS6hiBWdWXnmoRwcm90b3R5cGXkuIogdGhpc+aMh+WQkXZ1ZeWunuS+iwogICAgICAgICAgICAgICAgaWYgKHRoaXMgJiYgdGhpcy4kbm90aWZ5KSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChfY29udGV4dC50MCkpOwoKICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSwgdGhpcywgW1s0LCAxOV1dKTsKICB9KSk7CiAgcmV0dXJuIF9IdHRwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},{"version":3,"sources":["D:/githubdesk/Movie-Recommendation/vue-blog/src/api/http.js"],"names":["service","store","API_LIST","base","encrypt","TOKEN_NAME","Http","type","data","params","Error","url","method","noMessage","rsaKey","rest","setToken","toLowerCase","restSymbol","match","replace","Object","keys","forEach","key","placeholder","includes","result","token","uid","userId","set","$store","dispatch","response","message","$notify","error","title","Promise","reject"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,OAAP,MAAoB,UAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,OAAP,MAAoB,gBAApB;IAEQC,U,GAAeF,I,CAAfE,U;AAER,wBAA8BC,IAA9B;AAAA;AAAA;;;kEAAe;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAsBC,YAAAA,IAAtB,QAAsBA,IAAtB,EAA4BC,IAA5B,QAA4BA,IAA5B,EAAkCC,MAAlC,QAAkCA,MAAlC;;AAAA,gBACPF,IAAI,IAAIL,QADD;AAAA;AAAA;AAAA;;AAAA,kBAEL,IAAIQ,KAAJ,CAAU,SAAV,CAFK;;AAAA;AAAA,6BAK4ER,QAAQ,CAACK,IAAD,CALpF,EAKPI,GALO,kBAKPA,GALO,EAKFC,MALE,kBAKFA,MALE,yCAKMC,SALN,EAKMA,SALN,sCAKkB,KALlB,iEAKyBC,MALzB,EAKyBA,MALzB,sCAKkC,KALlC,+DAKyCC,IALzC,EAKyCA,IALzC,oCAKgD,KALhD,+DAKuDC,QALvD,EAKuDA,QALvD,sCAKkE,KALlE;AAAA;AAQXJ,YAAAA,MAAM,GAAGA,MAAM,CAACK,WAAP,EAAT,CARW,CAUX;;AACA,gBAAIF,IAAJ,EAAU;AACJG,cAAAA,UADI,GACSP,GAAG,CAACQ,KAAJ,CAAU,QAAV,EAAoB,CAApB,CADT;AAERR,cAAAA,GAAG,GAAGA,GAAG,CAACS,OAAJ,CAAY,QAAZ,EAAsBZ,IAAI,CAACU,UAAD,CAA1B,CAAN;AACD,aAHD,CAIA;AAJA,iBAKK,IAAIT,MAAM,IAAI,QAAOA,MAAP,MAAkB,QAAhC,EAA0C;AAC7C;AACAY,gBAAAA,MAAM,CAACC,IAAP,CAAYb,MAAZ,EAAoBc,OAApB,CAA4B,UAAAC,GAAG,EAAI;AACjC,sBAAMC,WAAW,GAAG,MAAMD,GAA1B;;AACA,sBAAIb,GAAG,CAACe,QAAJ,CAAaD,WAAb,CAAJ,EAA+B;AAC7Bd,oBAAAA,GAAG,GAAGA,GAAG,CAACS,OAAJ,CAAYK,WAAZ,EAAyBhB,MAAM,CAACe,GAAD,CAA/B,CAAN;AACD;AACF,iBALD;AAMD;;AAxBU,kBA0BPV,MAAM,IAAIN,IAAV,IAAkBA,IAAI,CAACM,MAAD,CA1Bf;AAAA;AAAA;AAAA;;AAAA;AAAA,mBA2BYV,OAAO,CAACI,IAAI,CAACM,MAAD,CAAL,CA3BnB;;AAAA;AA2BTN,YAAAA,IAAI,CAACM,MAAD,CA3BK;;AAAA;AA8BX;AACAN,YAAAA,IAAI,GAAGI,MAAM,KAAK,KAAX,GAAmB;AAAEH,cAAAA,MAAM,EAAED;AAAV,aAAnB,GAAsCA,IAA7C;AA/BW;AAAA,mBAiCQR,OAAO,CAACY,MAAD,CAAP,CAAgBD,GAAhB,EAAqBH,IAArB,CAjCR;;AAAA;AAiCPmB,YAAAA,MAjCO;;AAmCX,gBAAIX,QAAQ,IAAIW,MAAhB,EAAwB;AAClBC,cAAAA,KADkB,GACVD,MAAM,CAACC,KADG;AAElBC,cAAAA,GAFkB,GAEZF,MAAM,CAACG,MAFK;AAGtB7B,cAAAA,KAAK,CAAC8B,GAAN,CAAU,KAAV,EAAiBF,GAAjB,EAHsB,CAItB;;AACA5B,cAAAA,KAAK,CAAC8B,GAAN,CAAU1B,UAAV,EAAsBuB,KAAtB,EALsB,CAMtB;;AACA,kBAAI,QAAQ,KAAKI,MAAjB,EAAyB;AACvB,qBAAKA,MAAL,CAAYC,QAAZ,CAAqB,OAArB;AACD;AACF;;AA7CU,6CA+CJN,MA/CI;;AAAA;AAAA;AAAA;;AAiDX,gBAAI,YAAMO,QAAV,EAAoB;AACdC,cAAAA,OADc,GACJ,YAAMD,QAAN,CAAe1B,IAAf,CAAoB2B,OADhB;;AAElB,kBAAI,CAACtB,SAAL,EAAgB;AACd;AACA,oBAAI,QAAQ,KAAKuB,OAAjB,EAA0B;AACxB,uBAAKA,OAAL,CAAaC,KAAb,CAAmB;AACjBC,oBAAAA,KAAK,EAAE,IADU;AAEjBH,oBAAAA,OAAO,EAAPA;AAFiB,mBAAnB;AAID;AACF;AACF;;AA5DU,6CA6DJI,OAAO,CAACC,MAAR,aA7DI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import service from './common'\r\nimport store from 'store'\r\nimport API_LIST from '@/config/api.config'\r\nimport base from '@/config/base.config'\r\nimport encrypt from '@/util/encrypt'\r\n\r\nconst { TOKEN_NAME } = base\r\n\r\nexport default async function Http({ type, data, params }) {\r\n  if (!(type in API_LIST)) {\r\n    throw new Error('API请求错误')\r\n  }\r\n  \r\n  let { url, method, noMessage = false, rsaKey = false, rest = false, setToken = false } = API_LIST[type]\r\n  \r\n  try {\r\n    method = method.toLowerCase()\r\n    \r\n    // 处理 REST 风格的参数替换 (原有的 rest 处理逻辑)\r\n    if (rest) {\r\n      let restSymbol = url.match(/:(.*)$/)[1]\r\n      url = url.replace(/:(.*)$/, data[restSymbol])\r\n    }\r\n    // 新增：处理通用的参数替换 (用于 putUserInfo 等情况)\r\n    else if (params && typeof params === 'object') {\r\n      // 遍历 params 对象，替换 URL 中的所有占位符\r\n      Object.keys(params).forEach(key => {\r\n        const placeholder = ':' + key\r\n        if (url.includes(placeholder)) {\r\n          url = url.replace(placeholder, params[key])\r\n        }\r\n      })\r\n    }\r\n    \r\n    if (rsaKey && data && data[rsaKey]) {\r\n      data[rsaKey] = await encrypt(data[rsaKey])\r\n    }\r\n    \r\n    // 根据请求方法处理数据\r\n    data = method === 'get' ? { params: data } : data\r\n\r\n    let result = await service[method](url, data)\r\n\r\n    if (setToken && result) {\r\n      let token = result.token;\r\n      let uid = result.userId\r\n      store.set('uid', uid)\r\n      //本地存储token\r\n      store.set(TOKEN_NAME, token)\r\n      // 确保 this 存在再调用\r\n      if (this && this.$store) {\r\n        this.$store.dispatch('login')\r\n      }\r\n    }\r\n    \r\n    return result\r\n  } catch (error) {\r\n    if (error.response) {\r\n      let message = error.response.data.message\r\n      if (!noMessage) {\r\n        //http函数作为插件挂载到了 Vue的prototype上 this指向vue实例\r\n        if (this && this.$notify) {\r\n          this.$notify.error({\r\n            title: '错误',\r\n            message\r\n          })\r\n        }\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  } \r\n}"]}]}