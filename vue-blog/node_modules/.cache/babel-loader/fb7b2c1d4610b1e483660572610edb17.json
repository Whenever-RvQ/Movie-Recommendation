{"remainingRequest":"D:\\预科班6.2\\前端框架班\\vue\\Vue第二十三天 Vue高级  Vue  vue-blog 文章列表\\案例\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\预科班6.2\\前端框架班\\vue\\Vue第二十三天 Vue高级  Vue  vue-blog 文章列表\\案例\\vue-blog\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\预科班6.2\\前端框架班\\vue\\Vue第二十三天 Vue高级  Vue  vue-blog 文章列表\\案例\\vue-blog\\src\\api\\http.js","dependencies":[{"path":"D:\\预科班6.2\\前端框架班\\vue\\Vue第二十三天 Vue高级  Vue  vue-blog 文章列表\\案例\\vue-blog\\src\\api\\http.js","mtime":1611662050884},{"path":"D:\\预科班6.2\\前端框架班\\vue\\Vue第二十三天 Vue高级  Vue  vue-blog 文章列表\\案例\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\预科班6.2\\前端框架班\\vue\\Vue第二十三天 Vue高级  Vue  vue-blog 文章列表\\案例\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\预科班6.2\\前端框架班\\vue\\Vue第二十三天 Vue高级  Vue  vue-blog 文章列表\\案例\\vue-blog\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi9cdTk4ODRcdTc5RDFcdTczRUQ2LjIvXHU1MjREXHU3QUVGXHU2ODQ2XHU2N0I2XHU3M0VEL3Z1ZS9WdWVcdTdCMkNcdTRFOENcdTUzNDFcdTRFMDlcdTU5MjkgVnVlXHU5QUQ4XHU3RUE3ICBWdWUgIHZ1ZS1ibG9nIFx1NjU4N1x1N0FFMFx1NTIxN1x1ODg2OC9cdTY4NDhcdTRGOEIvdnVlLWJsb2cvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgc2VydmljZSBmcm9tICcuL2NvbW1vbic7CmltcG9ydCB2dWV4IGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgc3RvcmUgZnJvbSAnc3RvcmUnOwppbXBvcnQgQVBJX0xJU1QgZnJvbSAnQC9jb25maWcvYXBpLmNvbmZpZyc7CmltcG9ydCBiYXNlIGZyb20gJ0AvY29uZmlnL2Jhc2UuY29uZmlnJzsKaW1wb3J0IGVuY3J5cHQgZnJvbSAnQC91dGlsL2VuY3J5cHQnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CnZhciBUT0tFTl9OQU1FID0gYmFzZS5UT0tFTl9OQU1FOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIdHRwKF94KSB7CiAgcmV0dXJuIF9IdHRwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9IdHRwKCkgewogIF9IdHRwID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKF9yZWYpIHsKICAgIHZhciB0eXBlLCBkYXRhLCBfQVBJX0xJU1QkdHlwZSwgdXJsLCBtZXRob2QsIF9BUElfTElTVCR0eXBlJG5vTWVzcywgbm9NZXNzYWdlLCBfQVBJX0xJU1QkdHlwZSRyc2FLZXksIHJzYUtleSwgX0FQSV9MSVNUJHR5cGUkcmVzdCwgcmVzdCwgX0FQSV9MSVNUJHR5cGUkc2V0VG9rLCBzZXRUb2tlbiwgcmVzdFN5bWJvbCwgcmVzdWx0LCB0b2tlbiwgdWlkLCBtZXNzYWdlOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgdHlwZSA9IF9yZWYudHlwZSwgZGF0YSA9IF9yZWYuZGF0YTsKCiAgICAgICAgICAgIGlmICh0eXBlIGluIEFQSV9MSVNUKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQVBJ6K+35rGC6ZSZ6K+vJyk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBfQVBJX0xJU1QkdHlwZSA9IEFQSV9MSVNUW3R5cGVdLCB1cmwgPSBfQVBJX0xJU1QkdHlwZS51cmwsIG1ldGhvZCA9IF9BUElfTElTVCR0eXBlLm1ldGhvZCwgX0FQSV9MSVNUJHR5cGUkbm9NZXNzID0gX0FQSV9MSVNUJHR5cGUubm9NZXNzYWdlLCBub01lc3NhZ2UgPSBfQVBJX0xJU1QkdHlwZSRub01lc3MgPT09IHZvaWQgMCA/IGZhbHNlIDogX0FQSV9MSVNUJHR5cGUkbm9NZXNzLCBfQVBJX0xJU1QkdHlwZSRyc2FLZXkgPSBfQVBJX0xJU1QkdHlwZS5yc2FLZXksIHJzYUtleSA9IF9BUElfTElTVCR0eXBlJHJzYUtleSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfQVBJX0xJU1QkdHlwZSRyc2FLZXksIF9BUElfTElTVCR0eXBlJHJlc3QgPSBfQVBJX0xJU1QkdHlwZS5yZXN0LCByZXN0ID0gX0FQSV9MSVNUJHR5cGUkcmVzdCA9PT0gdm9pZCAwID8gZmFsc2UgOiBfQVBJX0xJU1QkdHlwZSRyZXN0LCBfQVBJX0xJU1QkdHlwZSRzZXRUb2sgPSBfQVBJX0xJU1QkdHlwZS5zZXRUb2tlbiwgc2V0VG9rZW4gPSBfQVBJX0xJU1QkdHlwZSRzZXRUb2sgPT09IHZvaWQgMCA/IGZhbHNlIDogX0FQSV9MSVNUJHR5cGUkc2V0VG9rOwogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDsKICAgICAgICAgICAgbWV0aG9kID0gbWV0aG9kLnRvTG93ZXJDYXNlKCk7CgogICAgICAgICAgICBpZiAocmVzdCkgewogICAgICAgICAgICAgIHJlc3RTeW1ib2wgPSB1cmwubWF0Y2goLzooLiopJC8pWzFdOwogICAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKC86KC4qKSQvLCBkYXRhW3Jlc3RTeW1ib2xdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCEocnNhS2V5ICYmIGRhdGFbcnNhS2V5XSkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgcmV0dXJuIGVuY3J5cHQoZGF0YVtyc2FLZXldKTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBkYXRhW3JzYUtleV0gPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGRhdGEgPSBtZXRob2QgPT09ICdnZXQnID8gewogICAgICAgICAgICAgIHBhcmFtczogZGF0YQogICAgICAgICAgICB9IDogZGF0YTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICByZXR1cm4gc2VydmljZVttZXRob2RdKHVybCwgZGF0YSk7CgogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgIGlmIChzZXRUb2tlbikgewogICAgICAgICAgICAgIHRva2VuID0gcmVzdWx0LnRva2VuOwogICAgICAgICAgICAgIHVpZCA9IHJlc3VsdC51c2VySWQ7CiAgICAgICAgICAgICAgc3RvcmUuc2V0KCd1aWQnLCB1aWQpOyAvL+acrOWcsOWtmOWCqHRva2VuCgogICAgICAgICAgICAgIHN0b3JlLnNldChUT0tFTl9OQU1FLCB0b2tlbik7CiAgICAgICAgICAgICAgdnVleC5kaXNwYXRjaCgnbG9naW4nKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTk7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oNCk7CgogICAgICAgICAgICBpZiAoX2NvbnRleHQudDAucmVzcG9uc2UpIHsKICAgICAgICAgICAgICBtZXNzYWdlID0gX2NvbnRleHQudDAucmVzcG9uc2UuZGF0YS5tZXNzYWdlOwoKICAgICAgICAgICAgICBpZiAoIW5vTWVzc2FnZSkgewogICAgICAgICAgICAgICAgVnVlLnByb3RvdHlwZS4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KF9jb250ZXh0LnQwKSk7CgogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzQsIDE5XV0pOwogIH0pKTsKICByZXR1cm4gX0h0dHAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQ=="},{"version":3,"sources":["D:/预科班6.2/前端框架班/vue/Vue第二十三天 Vue高级  Vue  vue-blog 文章列表/案例/vue-blog/src/api/http.js"],"names":["service","vuex","store","API_LIST","base","encrypt","Vue","TOKEN_NAME","Http","type","data","Error","url","method","noMessage","rsaKey","rest","setToken","toLowerCase","restSymbol","match","replace","params","result","token","uid","userId","set","dispatch","response","message","prototype","$notify","error","title","Promise","reject"],"mappings":";;;;;;AAAA,OAAOA,OAAP,MAAoB,UAApB;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,OAAP,MAAoB,gBAApB;AACA,OAAOC,GAAP,MAAgB,KAAhB;IAEQC,U,GAAeH,I,CAAfG,U;AACR,wBAA8BC,IAA9B;AAAA;AAAA;;;kEAAe;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAuBC,YAAAA,IAAvB,QAAuBA,IAAvB,EAA6BC,IAA7B,QAA6BA,IAA7B;;AAAA,gBACPD,IAAI,IAAIN,QADD;AAAA;AAAA;AAAA;;AAAA,kBAEL,IAAIQ,KAAJ,CAAU,SAAV,CAFK;;AAAA;AAAA,6BAI4ER,QAAQ,CAACM,IAAD,CAJpF,EAIPG,GAJO,kBAIPA,GAJO,EAIFC,MAJE,kBAIFA,MAJE,yCAIMC,SAJN,EAIMA,SAJN,sCAIkB,KAJlB,iEAIyBC,MAJzB,EAIyBA,MAJzB,sCAIkC,KAJlC,+DAIyCC,IAJzC,EAIyCA,IAJzC,oCAIgD,KAJhD,+DAIuDC,QAJvD,EAIuDA,QAJvD,sCAIkE,KAJlE;AAAA;AAMXJ,YAAAA,MAAM,GAAGA,MAAM,CAACK,WAAP,EAAT;;AACA,gBAAIF,IAAJ,EAAU;AACJG,cAAAA,UADI,GACSP,GAAG,CAACQ,KAAJ,CAAU,QAAV,EAAoB,CAApB,CADT;AAERR,cAAAA,GAAG,GAAGA,GAAG,CAACS,OAAJ,CAAY,QAAZ,EAAsBX,IAAI,CAACS,UAAD,CAA1B,CAAN;AACD;;AAVU,kBAWPJ,MAAM,IAAIL,IAAI,CAACK,MAAD,CAXP;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAYYV,OAAO,CAACK,IAAI,CAACK,MAAD,CAAL,CAZnB;;AAAA;AAYTL,YAAAA,IAAI,CAACK,MAAD,CAZK;;AAAA;AAcXL,YAAAA,IAAI,GAAGG,MAAM,KAAK,KAAX,GAAmB;AAAES,cAAAA,MAAM,EAAEZ;AAAV,aAAnB,GAAsCA,IAA7C;AAdW;AAAA,mBAgBQV,OAAO,CAACa,MAAD,CAAP,CAAgBD,GAAhB,EAAqBF,IAArB,CAhBR;;AAAA;AAgBPa,YAAAA,MAhBO;;AAkBX,gBAAIN,QAAJ,EAAc;AACRO,cAAAA,KADQ,GACAD,MAAM,CAACC,KADP;AAERC,cAAAA,GAFQ,GAEFF,MAAM,CAACG,MAFL;AAGZxB,cAAAA,KAAK,CAACyB,GAAN,CAAU,KAAV,EAAiBF,GAAjB,EAHY,CAIZ;;AACAvB,cAAAA,KAAK,CAACyB,GAAN,CAAUpB,UAAV,EAAsBiB,KAAtB;AACAvB,cAAAA,IAAI,CAAC2B,QAAL,CAAc,OAAd;AACD;;AAzBU,6CA0BJL,MA1BI;;AAAA;AAAA;AAAA;;AA4BX,gBAAI,YAAMM,QAAV,EAAoB;AACdC,cAAAA,OADc,GACJ,YAAMD,QAAN,CAAenB,IAAf,CAAoBoB,OADhB;;AAElB,kBAAI,CAAChB,SAAL,EAAgB;AACdR,gBAAAA,GAAG,CAACyB,SAAJ,CAAcC,OAAd,CAAsBC,KAAtB,CAA4B;AAC1BC,kBAAAA,KAAK,EAAE,IADmB;AAE1BJ,kBAAAA,OAAO,EAAPA;AAF0B,iBAA5B;AAID;AACF;;AApCU,6CAqCJK,OAAO,CAACC,MAAR,aArCI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import service from './common'\r\nimport vuex from '@/store'\r\nimport store from 'store'\r\nimport API_LIST from '@/config/api.config'\r\nimport base from '@/config/base.config'\r\nimport encrypt from '@/util/encrypt'\r\nimport Vue from 'vue'\r\n\r\nconst { TOKEN_NAME } = base\r\nexport default async function Http ({ type, data }) {\r\n  if (!(type in API_LIST)) {\r\n    throw new Error('API请求错误')\r\n  }\r\n  let { url, method, noMessage = false, rsaKey = false, rest = false, setToken = false } = API_LIST[type]\r\n  try {\r\n    method = method.toLowerCase()\r\n    if (rest) {\r\n      let restSymbol = url.match(/:(.*)$/)[1]\r\n      url = url.replace(/:(.*)$/, data[restSymbol])\r\n    }\r\n    if (rsaKey && data[rsaKey]) {\r\n      data[rsaKey] = await encrypt(data[rsaKey])\r\n    }\r\n    data = method === 'get' ? { params: data } : data\r\n\r\n    let result = await service[method](url, data)\r\n\r\n    if (setToken) {\r\n      let token = result.token;\r\n      let uid = result.userId\r\n      store.set('uid', uid)\r\n      //本地存储token\r\n      store.set(TOKEN_NAME, token)\r\n      vuex.dispatch('login')\r\n    }\r\n    return result\r\n  } catch (error) {\r\n    if (error.response) {\r\n      let message = error.response.data.message\r\n      if (!noMessage) {\r\n        Vue.prototype.$notify.error({\r\n          title: '错误',\r\n          message,\r\n        })\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n}\r\n"]}]}