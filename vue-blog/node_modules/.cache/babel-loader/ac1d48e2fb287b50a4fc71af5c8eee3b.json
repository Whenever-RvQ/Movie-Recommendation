{"remainingRequest":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\githubdesk\\Movie-Recommendation\\vue-blog\\src\\util\\encrypt.js","dependencies":[{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\src\\util\\encrypt.js","mtime":1611584132230},{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\githubdesk\\Movie-Recommendation\\vue-blog\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L2dpdGh1YmRlc2svTW92aWUtUmVjb21tZW5kYXRpb24vdnVlLWJsb2cvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgc3RvcmUgZnJvbSAnc3RvcmUnOwppbXBvcnQgYmFzZSBmcm9tICdAL2NvbmZpZy9iYXNlLmNvbmZpZyc7CmltcG9ydCBKU0VuY3J5cHQgZnJvbSAnanNlbmNyeXB0JzsKaW1wb3J0IHNlcnZpY2UgZnJvbSAnQC9hcGkvY29tbW9uJzsKdmFyIFBVQktFWV9OQU1FID0gYmFzZS5QVUJLRVlfTkFNRTsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZW5jcnlwdChfeCkgewogIHJldHVybiBfZW5jcnlwdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZW5jcnlwdCgpIHsKICBfZW5jcnlwdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh2YWx1ZSkgewogICAgdmFyIGtleSwgcmVzdWx0LCBfZW5jcnlwdDI7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBrZXkgPSBzdG9yZS5nZXQoUFVCS0VZX05BTUUpOwogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTsKCiAgICAgICAgICAgIGlmICghKCFrZXkgfHwga2V5ID09PSAndW5kZWZpbmVkJykpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICByZXR1cm4gc2VydmljZS5nZXQoJy9rZXlzJyk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBrZXkgPSByZXN1bHQucHViS2V5OwogICAgICAgICAgICBrZXkgPSBrZXkucmVwbGFjZSgvXC4gKy9nLCAnJyk7CiAgICAgICAgICAgIGtleSA9IGtleS5yZXBsYWNlKC9bXHJcbl0vZywgJycpOwogICAgICAgICAgICBzdG9yZS5zZXQoUFVCS0VZX05BTUUsIGtleSk7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgX2VuY3J5cHQyID0gbmV3IEpTRW5jcnlwdCgpOwoKICAgICAgICAgICAgX2VuY3J5cHQyLnNldFB1YmxpY0tleShrZXkpOwoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2VuY3J5cHQyLmVuY3J5cHQodmFsdWUpKTsKCiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTU7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgMTVdXSk7CiAgfSkpOwogIHJldHVybiBfZW5jcnlwdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9"},{"version":3,"sources":["D:/githubdesk/Movie-Recommendation/vue-blog/src/util/encrypt.js"],"names":["store","base","JSEncrypt","service","PUBKEY_NAME","encrypt","value","key","get","result","pubKey","replace","set","setPublicKey","console","log"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAOC,OAAP,MAAoB,cAApB;IAEQC,W,GAAgBH,I,CAAhBG,W;AACR,wBACiBC,OADjB;AAAA;AAAA;;;qEACE,iBAAwBC,KAAxB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACIC,YAAAA,GADJ,GACUP,KAAK,CAACQ,GAAN,CAAUJ,WAAV,CADV;AAAA;;AAAA,kBAGM,CAACG,GAAD,IAAQA,GAAG,KAAK,WAHtB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAIuBJ,OAAO,CAACK,GAAR,CAAY,OAAZ,CAJvB;;AAAA;AAIQC,YAAAA,MAJR;AAKIF,YAAAA,GAAG,GAAGE,MAAM,CAACC,MAAb;AACAH,YAAAA,GAAG,GAAGA,GAAG,CAACI,OAAJ,CAAY,OAAZ,EAAqB,EAArB,CAAN;AACAJ,YAAAA,GAAG,GAAGA,GAAG,CAACI,OAAJ,CAAY,SAAZ,EAAuB,EAAvB,CAAN;AACAX,YAAAA,KAAK,CAACY,GAAN,CAAUR,WAAV,EAAuBG,GAAvB;;AARJ;AAUMF,YAAAA,SAVN,GAUgB,IAAIH,SAAJ,EAVhB;;AAWEG,YAAAA,SAAO,CAACQ,YAAR,CAAqBN,GAArB;;AAXF,6CAYSF,SAAO,CAACA,OAAR,CAAgBC,KAAhB,CAZT;;AAAA;AAAA;AAAA;AAcEQ,YAAAA,OAAO,CAACC,GAAR;;AAdF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import store from 'store'\r\nimport base from '@/config/base.config'\r\nimport JSEncrypt from 'jsencrypt'\r\nimport service from '@/api/common'\r\n\r\nconst { PUBKEY_NAME } = base\r\nexport default\r\n  async function encrypt (value) {\r\n  let key = store.get(PUBKEY_NAME)\r\n  try {\r\n    if (!key || key === 'undefined') {\r\n      let result = await service.get('/keys')\r\n      key = result.pubKey\r\n      key = key.replace(/\\. +/g, '')\r\n      key = key.replace(/[\\r\\n]/g, '')\r\n      store.set(PUBKEY_NAME, key)\r\n    }\r\n    let encrypt = new JSEncrypt()\r\n    encrypt.setPublicKey(key)\r\n    return encrypt.encrypt(value)\r\n  } catch (err) {\r\n    console.log(err)\r\n  }\r\n}"]}]}