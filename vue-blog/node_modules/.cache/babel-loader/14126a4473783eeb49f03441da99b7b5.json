{"remainingRequest":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\githubdesk\\Vue-blog\\vue-blog\\src\\views\\Socket.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\src\\views\\Socket.vue","mtime":1762832105363},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi9naXRodWJkZXNrL1Z1ZS1ibG9nL3Z1ZS1ibG9nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgaW8gfSBmcm9tICdzb2NrZXQuaW8tY2xpZW50JzsKaW1wb3J0IGZvcm1hdERhdGUgZnJvbSAnQC91dGlsL2Zvcm1hdERhdGUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1NvY2tldENoYXQnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZW5kTXNnOiAnJywKICAgICAgY2hhdExpc3Q6IFtdLAogICAgICBuaWtuYW1lOiAnJywKICAgICAgd3M6IG51bGwsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy4kc3RvcmUuY29tbWl0KCdSSUdIVF9MSVZFMkRfRElTJyk7CiAgICB0aGlzLmdldE5pa25hbWUoKTsgLy8g6L+e5o6lU29ja2V0CgogICAgdGhpcy53cyA9IGlvKCJ3czovLzEyNy4wLjAuMTo4ODg4IiwgewogICAgICB0cmFuc3BvcnRzOiBbJ3dlYnNvY2tldCddCiAgICB9KTsKICAgIHRoaXMud3Mub24oJ2Nvbm5lY3QnLCBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnNvbGUubG9nKCflu7rnq4vov57mjqUnKTsgLy8g5bey55m75b2V55So5oi36Ieq5Yqo5Y+R6YCB55m75b2V54q25oCBCgogICAgICBpZiAoX3RoaXMubmlrbmFtZSkgewogICAgICAgIF90aGlzLndzLmVtaXQoJ2xvZ2luJywgX3RoaXMubmlrbmFtZSk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy53cy5vbignY2hhdCcsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIF90aGlzLnNlcnZlckNoYXQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMud3Mub24oJ2xvZ291dCcsIGZ1bmN0aW9uIChuaWtuYW1lKSB7CiAgICAgIF90aGlzLnNlcnZlckxvZyh7CiAgICAgICAgbmlrbmFtZTogbmlrbmFtZSwKICAgICAgICBpc0xvZ2luOiBmYWxzZQogICAgICB9KTsKICAgIH0pOwogICAgdGhpcy53cy5vbignbG9nZ2VkJywgZnVuY3Rpb24gKG5pa25hbWUpIHsKICAgICAgX3RoaXMuc2VydmVyTG9nKHsKICAgICAgICBuaWtuYW1lOiBuaWtuYW1lLAogICAgICAgIGlzTG9naW46IHRydWUKICAgICAgfSk7CiAgICB9KTsgLy8g55uR5ZCs6L+e5o6l6ZSZ6K+vCgogICAgdGhpcy53cy5vbignZXJyb3InLCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcignU29ja2V06L+e5o6l6ZSZ6K+vOicsIGVycm9yKTsKCiAgICAgIF90aGlzLmFkZENoYXQoewogICAgICAgIHR5cGU6ICdhY3Rpb24nLAogICAgICAgIG1zZzogJ+i/nuaOpeiBiuWkqeWupOWksei0pe+8jOivt+WIt+aWsOmhtemdoumHjeivlScKICAgICAgfSk7CiAgICB9KTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLiRzdG9yZS5jb21taXQoJ0xFRlRfTElWRTJEX0RJUycpOyAvLyDlhbPpl61zb2NrZXTov57mjqUKCiAgICBpZiAodGhpcy53cykgewogICAgICB0aGlzLndzLmNsb3NlKCk7CiAgICB9CiAgfSwKICB1cGRhdGVkOiBmdW5jdGlvbiB1cGRhdGVkKCkgewogICAgLy8g5rua5Yqo5Yiw5bqV6YOoCiAgICB2YXIgY29udGVudCA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5ibG9nLWNoYXQtLWNvbnRlbnQnKTsKCiAgICBpZiAoY29udGVudCkgewogICAgICBjb250ZW50LnNjcm9sbFRvcCA9IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0TmlrbmFtZTogZnVuY3Rpb24gZ2V0TmlrbmFtZSgpIHsKICAgICAgdmFyIF90aGlzJCRzdG9yZSRnZXR0ZXJzJDsKCiAgICAgIHZhciBuaWtuYW1lID0gKF90aGlzJCRzdG9yZSRnZXR0ZXJzJCA9IHRoaXMuJHN0b3JlLmdldHRlcnMudXNlckluZm8pID09PSBudWxsIHx8IF90aGlzJCRzdG9yZSRnZXR0ZXJzJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkJHN0b3JlJGdldHRlcnMkLm5pa25hbWU7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9ICFuaWtuYW1lOwogICAgICB0aGlzLm5pa25hbWUgPSBuaWtuYW1lIHx8ICcnOwogICAgfSwKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgaWYgKCF0aGlzLm5pa25hbWUudHJpbSgpKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fovpPlhaXmnInmlYjnmoTmmLXnp7AnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMud3MuZW1pdCgnbG9naW4nLCB0aGlzLm5pa25hbWUudHJpbSgpKTsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7IC8vIOS/neWtmOaYteensOWIsHN0b3JlCgogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ1NFVF9VU0VSX0lORk8nLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuJHN0b3JlLmdldHRlcnMudXNlckluZm8pLCB7fSwgewogICAgICAgIG5pa25hbWU6IHRoaXMubmlrbmFtZS50cmltKCkKICAgICAgfSkpOwogICAgfSwKICAgIGFkZENoYXQ6IGZ1bmN0aW9uIGFkZENoYXQoX3JlZikgewogICAgICB2YXIgX3JlZiR0eXBlID0gX3JlZi50eXBlLAogICAgICAgICAgdHlwZSA9IF9yZWYkdHlwZSA9PT0gdm9pZCAwID8gIm1zZyIgOiBfcmVmJHR5cGUsCiAgICAgICAgICBfcmVmJG1zZyA9IF9yZWYubXNnLAogICAgICAgICAgbXNnID0gX3JlZiRtc2cgPT09IHZvaWQgMCA/ICIiIDogX3JlZiRtc2csCiAgICAgICAgICBfcmVmJG5pa25hbWUgPSBfcmVmLm5pa25hbWUsCiAgICAgICAgICBuaWtuYW1lID0gX3JlZiRuaWtuYW1lID09PSB2b2lkIDAgPyAnJyA6IF9yZWYkbmlrbmFtZSwKICAgICAgICAgIF9yZWYkdGltZSA9IF9yZWYudGltZSwKICAgICAgICAgIHRpbWUgPSBfcmVmJHRpbWUgPT09IHZvaWQgMCA/IGZvcm1hdERhdGUoKSA6IF9yZWYkdGltZSwKICAgICAgICAgIF9yZWYkaXNNZSA9IF9yZWYuaXNNZSwKICAgICAgICAgIGlzTWUgPSBfcmVmJGlzTWUgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRpc01lOwogICAgICB2YXIgZGlzID0gJ2xlZnQnOwoKICAgICAgaWYgKHR5cGUgPT09ICdhY3Rpb24nKSB7CiAgICAgICAgZGlzID0gJ2NlbnRlcic7CiAgICAgIH0KCiAgICAgIGlmIChpc01lKSB7CiAgICAgICAgZGlzID0gJ3JpZ2h0JzsKICAgICAgfQoKICAgICAgdGhpcy5jaGF0TGlzdC5wdXNoKHsKICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgIG1zZzogbXNnLAogICAgICAgIG5pa25hbWU6IG5pa25hbWUsCiAgICAgICAgdGltZTogdGltZSwKICAgICAgICBpc01lOiBpc01lLAogICAgICAgIGRpczogZGlzCiAgICAgIH0pOwogICAgfSwKICAgIHNlbmRDaGF0OiBmdW5jdGlvbiBzZW5kQ2hhdCgpIHsKICAgICAgdmFyIG1zZyA9IHRoaXMuc2VuZE1zZy50cmltKCk7CgogICAgICBpZiAoIW1zZykgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36L6T5YWl6IGK5aSp5YaF5a65Jyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIXRoaXMubmlrbmFtZSkgewogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmFkZENoYXQoewogICAgICAgIGlzTWU6IHRydWUsCiAgICAgICAgbXNnOiBtc2csCiAgICAgICAgbmlrbmFtZTogdGhpcy5uaWtuYW1lCiAgICAgIH0pOwogICAgICB0aGlzLndzLmVtaXQoJ3NlbmQnLCB7CiAgICAgICAgbXNnOiBtc2csCiAgICAgICAgbmlrbmFtZTogdGhpcy5uaWtuYW1lLAogICAgICAgIHRpbWU6IGZvcm1hdERhdGUoKQogICAgICB9KTsKICAgICAgdGhpcy5zZW5kTXNnID0gJyc7CiAgICB9LAogICAgc2VydmVyQ2hhdDogZnVuY3Rpb24gc2VydmVyQ2hhdChkYXRhKSB7CiAgICAgIC8vIOino+aehOaXtuWinuWKoOWuuemUme+8jOmBv+WFjeWtl+autee8uuWkseWvvOiHtOaYvuekuuWMv+WQjQogICAgICBjb25zb2xlLmxvZygn5o6l5pS25Yiw5pyN5Yqh5Zmo5raI5oGv77yaJywgZGF0YSk7CgogICAgICB2YXIgX3JlZjIgPSBkYXRhIHx8IHt9LAogICAgICAgICAgX3JlZjIkbXNnID0gX3JlZjIubXNnLAogICAgICAgICAgbXNnID0gX3JlZjIkbXNnID09PSB2b2lkIDAgPyAnJyA6IF9yZWYyJG1zZywKICAgICAgICAgIF9yZWYyJG5pa25hbWUgPSBfcmVmMi5uaWtuYW1lLAogICAgICAgICAgbmlrbmFtZSA9IF9yZWYyJG5pa25hbWUgPT09IHZvaWQgMCA/ICcnIDogX3JlZjIkbmlrbmFtZSwKICAgICAgICAgIF9yZWYyJHRpbWUgPSBfcmVmMi50aW1lLAogICAgICAgICAgdGltZSA9IF9yZWYyJHRpbWUgPT09IHZvaWQgMCA/ICcnIDogX3JlZjIkdGltZTsgLy8g5paw5aKe77ya5aaC5p6cIG5pa25hbWUg5Li656m677yM5pi+56S644CM5pyq55+l55So5oi344CN77yI5q+U5Yy/5ZCN55So5oi35pu05YeG56Gu77yJCgoKICAgICAgdmFyIHNob3dOaWtuYW1lID0gbmlrbmFtZS50cmltKCkgfHwgJ+acquefpeeUqOaItyc7CiAgICAgIHRoaXMuYWRkQ2hhdCh7CiAgICAgICAgbmlrbmFtZTogc2hvd05pa25hbWUsCiAgICAgICAgbXNnOiBtc2cudHJpbSgpIHx8ICfnqbrmtojmga8nLAogICAgICAgIHRpbWU6IHRpbWUgfHwgZm9ybWF0RGF0ZSgpIC8vIOWQjuerr+ayoeS8oOaXtumXtOaXtu+8jOWJjeerr+ihpeWFqAoKICAgICAgfSk7CiAgICB9LAogICAgc2VydmVyTG9nOiBmdW5jdGlvbiBzZXJ2ZXJMb2coX3JlZjMpIHsKICAgICAgdmFyIG5pa25hbWUgPSBfcmVmMy5uaWtuYW1lLAogICAgICAgICAgaXNMb2dpbiA9IF9yZWYzLmlzTG9naW47CiAgICAgIHZhciBzdGF0ZSA9IGlzTG9naW4gPyAn6L+b5YWlJyA6ICfnprvlvIAnOwogICAgICB2YXIgbXNnID0gIiIuY29uY2F0KG5pa25hbWUsICIgIikuY29uY2F0KHN0YXRlLCAiXHU0RTg2XHU4MDRBXHU1OTI5XHU1QkE0Iik7CiAgICAgIHRoaXMuYWRkQ2hhdCh7CiAgICAgICAgdHlwZTogJ2FjdGlvbicsCiAgICAgICAgbXNnOiBtc2cKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Socket.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"blog-chat\">\r\n    <div class=\"blog-chat--header\">\r\n      <i class=\"el-icon-comments\"></i>\r\n      <span>实时聊天室</span>\r\n    </div>\r\n    <div class=\"blog-chat--content\">\r\n      <div class=\"blog-chat--item\" :class=\"chat.dis\" v-for=\"chat in chatList\" :key=\"chat.time + chat.nikname\">\r\n\r\n        <span v-if=\"chat.nikname && chat.type !== 'action'\" class=\"blog-chat--nikname\">{{ chat.nikname }}</span>\r\n        <div class=\"blog-chat--box\" :class=\"{ action: chat.type === 'action' }\">\r\n          <span class=\"blog-chat--time\" v-if=\"chat.time && chat.type !== 'action'\">{{ chat.time }}</span>\r\n          <p class=\"blog-chat--msg\" v-if=\"chat.msg\">{{ chat.msg }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"blog-chat--bottom\">\r\n      <el-input v-model=\"sendMsg\" placeholder=\"请输入聊天内容...\" class=\"chat-input\" @keyup.enter=\"sendChat\">\r\n      </el-input>\r\n      <el-button type=\"primary\" @click=\"sendChat\" icon=\"el-icon-position\" class=\"send-btn\">\r\n        发送\r\n      </el-button>\r\n    </div>\r\n\r\n    <el-dialog title=\"设置昵称\" :visible=\"dialogVisible\" width=\"30%\" :close-on-click-modal=\"false\">\r\n      <el-input v-model=\"nikname\" placeholder=\"请输入你的昵称\" :maxlength=\"10\" show-word-limit>\r\n      </el-input>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"login\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { io } from 'socket.io-client'\r\nimport formatDate from '@/util/formatDate'\r\n\r\nexport default {\r\n  name: 'SocketChat',\r\n  data() {\r\n    return {\r\n      sendMsg: '',\r\n      chatList: [],\r\n      nikname: '',\r\n      ws: null,\r\n      dialogVisible: false\r\n    };\r\n  },\r\n  created() {\r\n    this.$store.commit('RIGHT_LIVE2D_DIS')\r\n    this.getNikname()\r\n\r\n    // 连接Socket\r\n    this.ws = io(\"ws://127.0.0.1:8888\", { transports: ['websocket'] })\r\n\r\n    this.ws.on('connect', () => {\r\n      console.log('建立连接')\r\n      // 已登录用户自动发送登录状态\r\n      if (this.nikname) {\r\n        this.ws.emit('login', this.nikname)\r\n      }\r\n    })\r\n\r\n    this.ws.on('chat', (data) => {\r\n      this.serverChat(data)\r\n    })\r\n\r\n    this.ws.on('logout', (nikname) => {\r\n      this.serverLog({ nikname, isLogin: false })\r\n    })\r\n\r\n    this.ws.on('logged', (nikname) => {\r\n      this.serverLog({ nikname, isLogin: true })\r\n    })\r\n\r\n    // 监听连接错误\r\n    this.ws.on('error', (error) => {\r\n      console.error('Socket连接错误:', error)\r\n      this.addChat({\r\n        type: 'action',\r\n        msg: '连接聊天室失败，请刷新页面重试'\r\n      })\r\n    })\r\n  },\r\n  beforeDestroy() {\r\n    this.$store.commit('LEFT_LIVE2D_DIS')\r\n    // 关闭socket连接\r\n    if (this.ws) {\r\n      this.ws.close()\r\n    }\r\n  },\r\n  updated() {\r\n    // 滚动到底部\r\n    const content = this.$el.querySelector('.blog-chat--content')\r\n    if (content) {\r\n      content.scrollTop = content.scrollHeight\r\n    }\r\n  },\r\n  methods: {\r\n    getNikname() {\r\n      let nikname = this.$store.getters.userInfo?.nikname\r\n      this.dialogVisible = !nikname\r\n      this.nikname = nikname || ''\r\n    },\r\n    login() {\r\n      if (!this.nikname.trim()) {\r\n        this.$message.warning('请输入有效的昵称')\r\n        return\r\n      }\r\n      this.ws.emit('login', this.nikname.trim())\r\n      this.dialogVisible = false\r\n      // 保存昵称到store\r\n      this.$store.commit('SET_USER_INFO', {\r\n        ...this.$store.getters.userInfo,\r\n        nikname: this.nikname.trim()\r\n      })\r\n    },\r\n    addChat({\r\n      type = \"msg\",\r\n      msg = \"\",\r\n      nikname = '',\r\n      time = formatDate(),\r\n      isMe = false\r\n    }) {\r\n      let dis = 'left'\r\n      if (type === 'action') {\r\n        dis = 'center'\r\n      }\r\n      if (isMe) {\r\n        dis = 'right'\r\n      }\r\n      this.chatList.push({\r\n        type, msg, nikname, time, isMe, dis\r\n      })\r\n    },\r\n    sendChat() {\r\n      const msg = this.sendMsg.trim()\r\n      if (!msg) {\r\n        this.$message.warning('请输入聊天内容')\r\n        return\r\n      }\r\n      if (!this.nikname) {\r\n        this.dialogVisible = true\r\n        return\r\n      }\r\n\r\n      this.addChat({\r\n        isMe: true,\r\n        msg,\r\n        nikname: this.nikname\r\n      })\r\n      this.ws.emit('send', {\r\n        msg,\r\n        nikname: this.nikname,\r\n        time: formatDate()\r\n      })\r\n      this.sendMsg = ''\r\n    },\r\n    serverChat(data) {\r\n      // 解构时增加容错，避免字段缺失导致显示匿名\r\n      console.log('接收到服务器消息：', data);\r\n      const { msg = '', nikname = '', time = '' } = data || {};\r\n      // 新增：如果 nikname 为空，显示「未知用户」（比匿名用户更准确）\r\n      const showNikname = nikname.trim() || '未知用户';\r\n\r\n      this.addChat({\r\n        nikname: showNikname,\r\n        msg: msg.trim() || '空消息',\r\n        time: time || formatDate() // 后端没传时间时，前端补全\r\n      })\r\n    },\r\n    serverLog({ nikname, isLogin }) {\r\n      const state = isLogin ? '进入' : '离开'\r\n      const msg = `${nikname} ${state}了聊天室`\r\n      this.addChat({\r\n        type: 'action', msg\r\n      })\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n// 全局样式变量\r\n$primary-color = #409EFF\r\n$secondary-color = #67C23A\r\n$gray-light = #F5F7FA\r\n$gray = #C0C4CC\r\n$gray-dark = #909399\r\n$text-color = #303133\r\n$bg-color = #F7F9FC\r\n$border-radius = 18px\r\n$shadow = 0 2px 12px rgba(0, 0, 0, 0.08)\r\n\r\n.blog-chat\r\n  display flex\r\n  flex-direction column\r\n  width 100%\r\n  max-width 800px  // 限制最大宽度\r\n  margin 10px auto\r\n  background-color #fff\r\n  border-radius 12px\r\n  box-shadow 0 4px 20px rgba(0, 0, 0, 0.1)\r\n  height 68vh\r\n  overflow hidden\r\n  transition all 0.3s ease\r\n\r\n  // 响应式调整\r\n  @media (max-width: 768px)\r\n    width 95%\r\n    height 75vh\r\n\r\n.blog-chat--header\r\n  display flex\r\n  align-items center\r\n  padding 16px 20px\r\n  background-color $primary-color\r\n  color #fff\r\n  font-size 18px\r\n  font-weight 500\r\n\r\n  i.el-icon-comments\r\n    margin-right 8px\r\n    font-size 20px\r\n\r\n.blog-chat--content\r\n  flex 1\r\n  padding 20px\r\n  overflow-y auto\r\n  background-color $bg-color\r\n  scroll-behavior smooth  // 平滑滚动\r\n\r\n  // 滚动条样式（如果需要隐藏，可注释这段）\r\n  &::-webkit-scrollbar\r\n    width 6px\r\n    height 6px\r\n\r\n  &::-webkit-scrollbar-thumb\r\n    background-color $gray\r\n    border-radius 3px\r\n\r\n  &::-webkit-scrollbar-track\r\n    background-color transparent\r\n\r\n// 修复核心：消息项容器样式\r\n.blog-chat--item\r\n  display flex\r\n  margin-bottom 16px\r\n  animation fadeIn 0.3s ease  // 消息出现动画\r\n  width: 100%  // 确保占满宽度\r\n\r\n  // 左侧消息（他人）- 靠左\r\n  &.left\r\n    justify-content: flex-start\r\n    flex-direction: row\r\n\r\n    .blog-chat--nikname\r\n      margin-right: 8px\r\n      color $gray-dark\r\n      font-size 12px\r\n      align-self: flex-start\r\n      margin-top: 2px\r\n\r\n    .blog-chat--box\r\n      background-color #fff\r\n      border 1px solid #E5E6EB\r\n      margin-left: 0  // 移除多余边距\r\n\r\n  // 右侧消息（自己）- 靠右（关键修复）\r\n  &.right\r\n    justify-content: flex-end  // 整体靠右\r\n    flex-direction: row  // 不需要反向，直接调整内部顺序\r\n    align-items: flex-start\r\n\r\n    // 自己的昵称在右边，所以margin-left\r\n    .blog-chat--nikname\r\n      margin-left: 8px\r\n      color $gray-dark\r\n      font-size 12px\r\n      align-self: flex-start\r\n      margin-top: 2px\r\n      order: 2  // 让昵称在消息框右边\r\n\r\n    .blog-chat--box\r\n      background-color $primary-color\r\n      color #fff\r\n      margin-right: 0  // 移除多余边距\r\n      order: 1  // 让消息框在昵称左边\r\n\r\n  // 中间系统消息\r\n  &.center\r\n    justify-content: center\r\n    flex-direction: row\r\n\r\n    .blog-chat--box\r\n      background-color #F0F2F5\r\n      color $gray-dark\r\n      font-size 13px\r\n      padding 6px 12px\r\n      border-radius 12px\r\n      max-width: 60%\r\n\r\n.blog-chat--nikname\r\n  font-size 12px\r\n  font-weight 500\r\n  margin-bottom 4px\r\n  display: inline-block\r\n\r\n.blog-chat--box\r\n  max-width: 70%  // 限制消息最大宽度\r\n  padding: 10px 14px\r\n  border-radius $border-radius\r\n  box-shadow $shadow\r\n  position: relative\r\n  transition all 0.2s ease\r\n  word-wrap: break-word  // 确保长文本换行\r\n\r\n  // 系统消息样式\r\n  &.action\r\n    background-color #F0F2F5\r\n    color $gray-dark\r\n    text-align: center\r\n    box-shadow: none\r\n    border-radius: 12px\r\n\r\n  // 气泡尖角 - 左侧消息\r\n  .left &::before\r\n    content: ''\r\n    position: absolute\r\n    left: -8px\r\n    top: 12px\r\n    width: 0\r\n    height: 0\r\n    border-top: 8px solid transparent\r\n    border-bottom: 8px solid transparent\r\n    border-right: 8px solid #fff\r\n    z-index: 1\r\n\r\n  // 气泡尖角 - 右侧消息（修复方向）\r\n  .right &::before\r\n    content: ''\r\n    position: absolute\r\n    right: -8px  // 尖角在右侧\r\n    top: 12px\r\n    width: 0\r\n    height: 0\r\n    border-top: 8px solid transparent\r\n    border-bottom: 8px solid transparent\r\n    border-left: 8px solid $primary-color  // 与自己消息框颜色一致\r\n    z-index: 1\r\n\r\n.blog-chat--time\r\n  font-size: 11px\r\n  color $gray\r\n  margin-bottom: 4px\r\n  display: block\r\n\r\n  // 自己消息的时间颜色\r\n  .right &\r\n    color: rgba(255, 255, 255, 0.7)\r\n\r\n.blog-chat--msg\r\n  font-size: 14px\r\n  line-height: 1.6\r\n  margin: 0\r\n  word-break: break-all  // 自动换行\r\n  white-space: normal\r\n\r\n.blog-chat--bottom\r\n  display: flex\r\n  gap: 12px\r\n  padding: 16px 20px\r\n  background-color #fff\r\n  border-top: 1px solid #F0F2F5\r\n  align-items: center  // 输入框和按钮垂直居中\r\n\r\n.chat-input\r\n  flex: 1\r\n  border-radius: 24px !important\r\n  border-color: #E5E6EB !important\r\n\r\n  &:focus-within\r\n    box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.2) !important\r\n\r\n.send-btn\r\n  border-radius: 24px !important\r\n  padding: 0 24px !important\r\n  height: 40px !important\r\n  font-size: 14px !important\r\n  transition all 0.2s ease\r\n\r\n  &:hover\r\n    background-color: #3391FF !important\r\n    transform: translateY(-1px)\r\n\r\n  &:active\r\n    transform: translateY(0)\r\n\r\n// 动画效果\r\n@keyframes fadeIn\r\n  from\r\n    opacity: 0\r\n    transform: translateY(10px)\r\n  to\r\n    opacity: 1\r\n    transform: translateY(0)\r\n\r\n// 对话框样式优化\r\n.el-dialog__header\r\n  background-color $primary-color\r\n  color: #fff !important\r\n  border-radius: 8px 8px 0 0\r\n\r\n.el-dialog__title\r\n  color: #fff !important\r\n  font-size: 16px !important\r\n\r\n.el-dialog__body\r\n  padding: 20px !important\r\n\r\n.el-input__inner\r\n  border-radius: 20px !important\r\n  height: 40px !important\r\n  line-height: 40px !important\r\n\r\n.el-button--primary\r\n  border-radius: 20px !important\r\n  padding: 0 20px !important\r\n\r\n// 兼容其他浏览器的滚动条隐藏（可选）\r\n@media screen and (-webkit-min-device-pixel-ratio: 0)\r\n  .blog-chat--content\r\n    scrollbar-width: none\r\n    -ms-overflow-style: none\r\n\r\n.blog-chat--content::-webkit-scrollbar\r\n  display: none !important\r\n</style>"],"sourceRoot":"src/views"}]}