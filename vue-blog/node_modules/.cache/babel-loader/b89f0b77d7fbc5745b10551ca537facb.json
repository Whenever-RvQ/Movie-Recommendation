{"remainingRequest":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\githubdesk\\Vue-blog\\vue-blog\\src\\components\\Live2d.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\src\\components\\Live2d.vue","mtime":1762770788308},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgTU9ERUxfTUFQID0gewogIDE6ICdsaXZlMmQtd2lkZ2V0LW1vZGVsLWdmJywKICAyOiAnbGl2ZTJkLXdpZGdldC1tb2RlbC1oaWppa2knCn07CnZhciBURVhUVVJFX01BUCA9IHsKICAxOiB7CiAgICAwOiAnR2FudHplcnRfRmVsaXhhbmRlci5tb2RlbC5qc29uJwogIH0sCiAgLy8g6Iul5pyJ5a6e6ZmF57q555CG5paH5Lu277yM5YaN5pu/5o2i5Li655yf5a6e5paH5Lu25ZCNCiAgMjogewogICAgMDogJ2hpamlraS5tb2RlbC5qc29uJwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdMaXZlMmQnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RlbElkOiAxLAogICAgICB0ZXh0dXJlc0lkOiAwLAogICAgICBsaXZlMmRJbnN0YW5jZTogbnVsbCAvLyDlrZjlgqggTGl2ZTJEIOWunuS+i++8jOeUqOS6jumUgOavgQoKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLmxvYWRMaXZlMmRTY3JpcHQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuaW5pdExpdmUyRCgpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICBjb25zb2xlLmVycm9yKCdMaXZlMkTohJrmnKzliqDovb3lpLHotKXvvJonLCBlcnIpOwogICAgfSk7CiAgfSwKICAvLyDnu4Tku7bljbjovb3ml7bplIDmr4HmqKHlnovvvIzpgb/lhY3lhoXlrZjms4TmvI8KICBiZWZvcmVVbm1vdW50OiBmdW5jdGlvbiBiZWZvcmVVbm1vdW50KCkgewogICAgdGhpcy5kZXN0cm95TGl2ZTJEKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkTGl2ZTJkU2NyaXB0OiBmdW5jdGlvbiBsb2FkTGl2ZTJkU2NyaXB0KCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGlmICh3aW5kb3cubG9hZGxpdmUyZCB8fCB3aW5kb3cuTDJEd2lkZ2V0KSB7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICAgICAgc2NyaXB0LnNyYyA9ICcvc3RhdGljL2xpdmUyZHcvbGliL0wyRHdpZGdldC5taW4uanMnOwogICAgICAgIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7CiAgICAgICAgc2NyaXB0LmFzeW5jID0gZmFsc2U7CgogICAgICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpOwogICAgICAgIH07CgogICAgICAgIHNjcmlwdC5vbmVycm9yID0gZnVuY3Rpb24gKGVycikgewogICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpOwogICAgICAgIH07CgogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKICAgICAgfSk7CiAgICB9LAogICAgZGVzdHJveUxpdmUyRDogZnVuY3Rpb24gZGVzdHJveUxpdmUyRCgpIHsKICAgICAgaWYgKHRoaXMubGl2ZTJkSW5zdGFuY2UpIHsKICAgICAgICAvLyDlhbzlrrnkuI3lkIzniYjmnKznmoTplIDmr4Hmlrnms5UKICAgICAgICBpZiAodGhpcy5saXZlMmRJbnN0YW5jZS5kZXN0cm95KSB7CiAgICAgICAgICB0aGlzLmxpdmUyZEluc3RhbmNlLmRlc3Ryb3koKTsKICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5MMkR3aWRnZXQgJiYgd2luZG93LkwyRHdpZGdldC5kZXN0cm95KSB7CiAgICAgICAgICB3aW5kb3cuTDJEd2lkZ2V0LmRlc3Ryb3koJ2xpdmUyZCcpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5saXZlMmRJbnN0YW5jZSA9IG51bGw7CiAgICAgIH0gLy8g5riF56m655S75biD77yM6YG/5YWN5q6L55WZCgoKICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXZlMmQnKTsKCiAgICAgIGlmIChjYW52YXMpIHsKICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICB9CiAgICB9LAogICAgaW5pdExpdmUyRDogZnVuY3Rpb24gaW5pdExpdmUyRCgpIHsKICAgICAgLy8g5YWI6ZSA5q+B5pen5qih5Z6L77yM5YaN5Yid5aeL5YyW5paw5qih5Z6L77yI5qC45b+D5L+u5aSN77yJCiAgICAgIHRoaXMuZGVzdHJveUxpdmUyRCgpOwogICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpdmUyZCcpOwoKICAgICAgaWYgKCFjYW52YXMpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfmnKrmib7liLBMaXZlMkTnlLvluIPvvIEnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBtb2RlbEZvbGRlciA9IE1PREVMX01BUFt0aGlzLm1vZGVsSWRdOwogICAgICB2YXIgdGV4dHVyZUZpbGUgPSBURVhUVVJFX01BUFt0aGlzLm1vZGVsSWRdW3RoaXMudGV4dHVyZXNJZF07CiAgICAgIHZhciBtb2RlbENvbmZpZ1BhdGggPSAiL3B1YmxpYy9zdGF0aWMvbGl2ZTJkdy8iLmNvbmNhdChtb2RlbEZvbGRlciwgIi9hc3NldHMvIikuY29uY2F0KHRleHR1cmVGaWxlKTsKICAgICAgY29uc29sZS5sb2coIlx1NUY1M1x1NTI0RFx1NTJBMFx1OEY3RFx1NkEyMVx1NTc4Qlx1RkYxQUlEPSIuY29uY2F0KHRoaXMubW9kZWxJZCwgIlx1RkYwQ1x1OERFRlx1NUY4ND0iKS5jb25jYXQobW9kZWxDb25maWdQYXRoKSk7CgogICAgICB0cnkgewogICAgICAgIGlmICh3aW5kb3cubG9hZGxpdmUyZCkgewogICAgICAgICAgdGhpcy5saXZlMmRJbnN0YW5jZSA9IHdpbmRvdy5sb2FkbGl2ZTJkKCdsaXZlMmQnLCBtb2RlbENvbmZpZ1BhdGgpOwogICAgICAgIH0gZWxzZSBpZiAod2luZG93LkwyRHdpZGdldCkgewogICAgICAgICAgLy8g5a2Y5YKo5a6e5L6L77yM55So5LqO5ZCO57ut6ZSA5q+BCiAgICAgICAgICB0aGlzLmxpdmUyZEluc3RhbmNlID0gd2luZG93LkwyRHdpZGdldC5pbml0KHsKICAgICAgICAgICAgY2FudmFzSWQ6ICdsaXZlMmQnLAogICAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICAgIHVybDogbW9kZWxDb25maWdQYXRoCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRpc3BsYXk6IHsKICAgICAgICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJywKICAgICAgICAgICAgICBib3R0b206ICcxMHB4JywKICAgICAgICAgICAgICBsZWZ0OiAnMTAwcHgnLAogICAgICAgICAgICAgIHdpZHRoOiAyMDAsCiAgICAgICAgICAgICAgaGVpZ2h0OiAyMDAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbG9nOiBmYWxzZQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+acquaJvuWIsExpdmUyROaguOW/g0FQSScpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignTGl2ZTJE5Yid5aeL5YyW5aSx6LSl77yaJywgZXJyKTsgLy8g5Yqg6L295aSx6LSl5pe26YeN572u5Yiw6buY6K6k5qih5Z6LCgogICAgICAgIHRoaXMucmVzZXRNb2RlbCgpOwogICAgICB9CiAgICB9LAogICAgY2hhbmdlTW9kZWw6IGZ1bmN0aW9uIGNoYW5nZU1vZGVsKCkgewogICAgICB2YXIgbW9kZWxJZHMgPSBPYmplY3Qua2V5cyhNT0RFTF9NQVApLm1hcChOdW1iZXIpOwogICAgICB2YXIgY3VycmVudEluZGV4ID0gbW9kZWxJZHMuaW5kZXhPZih0aGlzLm1vZGVsSWQpOwogICAgICB0aGlzLm1vZGVsSWQgPSBtb2RlbElkc1soY3VycmVudEluZGV4ICsgMSkgJSBtb2RlbElkcy5sZW5ndGhdOwogICAgICB0aGlzLnRleHR1cmVzSWQgPSAwOwogICAgICB0aGlzLmluaXRMaXZlMkQoKTsgLy8g6YeN5paw5Yid5aeL5YyW77yI5Lya5YWI6ZSA5q+B5pen5qih5Z6L77yJCiAgICB9LAogICAgY2hhbmdlVGV4dHVyZXM6IGZ1bmN0aW9uIGNoYW5nZVRleHR1cmVzKCkgewogICAgICB2YXIgdGV4dHVyZUlkcyA9IE9iamVjdC5rZXlzKFRFWFRVUkVfTUFQW3RoaXMubW9kZWxJZF0pLm1hcChOdW1iZXIpOwogICAgICB2YXIgY3VycmVudEluZGV4ID0gdGV4dHVyZUlkcy5pbmRleE9mKHRoaXMudGV4dHVyZXNJZCk7CiAgICAgIHRoaXMudGV4dHVyZXNJZCA9IHRleHR1cmVJZHNbKGN1cnJlbnRJbmRleCArIDEpICUgdGV4dHVyZUlkcy5sZW5ndGhdOwogICAgICB0aGlzLmluaXRMaXZlMkQoKTsgLy8g6YeN5paw5Yid5aeL5YyW77yI5Lya5YWI6ZSA5q+B5pen5qih5Z6L77yJCiAgICB9LAogICAgcmVzZXRNb2RlbDogZnVuY3Rpb24gcmVzZXRNb2RlbCgpIHsKICAgICAgdGhpcy5tb2RlbElkID0gMTsKICAgICAgdGhpcy50ZXh0dXJlc0lkID0gMDsKICAgICAgdGhpcy5pbml0TGl2ZTJEKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Live2d.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAWA,IAAA,SAAA,GAAA;AACA,KAAA,wBADA;AAEA,KAAA;AAFA,CAAA;AAKA,IAAA,WAAA,GAAA;AACA,KAAA;AAAA,OAAA;AAAA,GADA;AACA;AACA,KAAA;AAAA,OAAA;AAAA;AAFA,CAAA;AAKA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,CADA;AAEA,MAAA,UAAA,EAAA,CAFA;AAGA,MAAA,cAAA,EAAA,IAHA,CAGA;;AAHA,KAAA;AAKA,GARA;AASA,EAAA,OATA,qBASA;AAAA;;AACA,SAAA,gBAAA,GAAA,IAAA,CAAA,YAAA;AACA,MAAA,KAAA,CAAA,UAAA;AACA,KAFA,EAEA,KAFA,CAEA,UAAA,GAAA,EAAA;AACA,MAAA,OAAA,CAAA,KAAA,CAAA,eAAA,EAAA,GAAA;AACA,KAJA;AAKA,GAfA;AAgBA;AACA,EAAA,aAjBA,2BAiBA;AACA,SAAA,aAAA;AACA,GAnBA;AAoBA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,8BACA;AACA,aAAA,IAAA,OAAA,CAAA,UAAA,OAAA,EAAA,MAAA,EAAA;AACA,YAAA,MAAA,CAAA,UAAA,IAAA,MAAA,CAAA,SAAA,EAAA;AACA,UAAA,OAAA;AACA;AACA;;AACA,YAAA,MAAA,GAAA,QAAA,CAAA,aAAA,CAAA,QAAA,CAAA;AACA,QAAA,MAAA,CAAA,GAAA,GAAA,sCAAA;AACA,QAAA,MAAA,CAAA,IAAA,GAAA,iBAAA;AACA,QAAA,MAAA,CAAA,KAAA,GAAA,KAAA;;AACA,QAAA,MAAA,CAAA,MAAA,GAAA;AAAA,iBAAA,OAAA,EAAA;AAAA,SAAA;;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,UAAA,GAAA;AAAA,iBAAA,MAAA,CAAA,GAAA,CAAA;AAAA,SAAA;;AACA,QAAA,QAAA,CAAA,IAAA,CAAA,WAAA,CAAA,MAAA;AACA,OAZA,CAAA;AAaA,KAfA;AAiBA,IAAA,aAjBA,2BAiBA;AACA,UAAA,KAAA,cAAA,EAAA;AACA;AACA,YAAA,KAAA,cAAA,CAAA,OAAA,EAAA;AACA,eAAA,cAAA,CAAA,OAAA;AACA,SAFA,MAEA,IAAA,MAAA,CAAA,SAAA,IAAA,MAAA,CAAA,SAAA,CAAA,OAAA,EAAA;AACA,UAAA,MAAA,CAAA,SAAA,CAAA,OAAA,CAAA,QAAA;AACA;;AACA,aAAA,cAAA,GAAA,IAAA;AACA,OATA,CAUA;;;AACA,UAAA,MAAA,GAAA,QAAA,CAAA,cAAA,CAAA,QAAA,CAAA;;AACA,UAAA,MAAA,EAAA;AACA,YAAA,GAAA,GAAA,MAAA,CAAA,UAAA,CAAA,IAAA,CAAA;AACA,QAAA,GAAA,CAAA,SAAA,CAAA,CAAA,EAAA,CAAA,EAAA,MAAA,CAAA,KAAA,EAAA,MAAA,CAAA,MAAA;AACA;AACA,KAjCA;AAmCA,IAAA,UAnCA,wBAmCA;AACA;AACA,WAAA,aAAA;AAEA,UAAA,MAAA,GAAA,QAAA,CAAA,cAAA,CAAA,QAAA,CAAA;;AACA,UAAA,CAAA,MAAA,EAAA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,cAAA;AACA;AACA;;AAEA,UAAA,WAAA,GAAA,SAAA,CAAA,KAAA,OAAA,CAAA;AACA,UAAA,WAAA,GAAA,WAAA,CAAA,KAAA,OAAA,CAAA,CAAA,KAAA,UAAA,CAAA;AACA,UAAA,eAAA,oCAAA,WAAA,qBAAA,WAAA,CAAA;AAGA,MAAA,OAAA,CAAA,GAAA,wDAAA,KAAA,OAAA,gCAAA,eAAA;;AAEA,UAAA;AACA,YAAA,MAAA,CAAA,UAAA,EAAA;AAEA,eAAA,cAAA,GAAA,MAAA,CAAA,UAAA,CAAA,QAAA,EAAA,eAAA,CAAA;AACA,SAHA,MAGA,IAAA,MAAA,CAAA,SAAA,EAAA;AACA;AACA,eAAA,cAAA,GAAA,MAAA,CAAA,SAAA,CAAA,IAAA,CAAA;AACA,YAAA,QAAA,EAAA,QADA;AAEA,YAAA,KAAA,EAAA;AAAA,cAAA,GAAA,EAAA;AAAA,aAFA;AAGA,YAAA,OAAA,EAAA;AACA,cAAA,QAAA,EAAA,OADA;AAEA,cAAA,MAAA,EAAA,MAFA;AAGA,cAAA,IAAA,EAAA,OAHA;AAIA,cAAA,KAAA,EAAA,GAJA;AAKA,cAAA,MAAA,EAAA;AALA,aAHA;AAUA,YAAA,GAAA,EAAA;AAVA,WAAA,CAAA;AAYA,SAdA,MAcA;AACA,UAAA,OAAA,CAAA,KAAA,CAAA,gBAAA;AACA;AACA,OArBA,CAqBA,OAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,cAAA,EAAA,GAAA,EADA,CAEA;;AACA,aAAA,UAAA;AACA;AACA,KA9EA;AAgFA,IAAA,WAhFA,yBAgFA;AACA,UAAA,QAAA,GAAA,MAAA,CAAA,IAAA,CAAA,SAAA,EAAA,GAAA,CAAA,MAAA,CAAA;AACA,UAAA,YAAA,GAAA,QAAA,CAAA,OAAA,CAAA,KAAA,OAAA,CAAA;AACA,WAAA,OAAA,GAAA,QAAA,CAAA,CAAA,YAAA,GAAA,CAAA,IAAA,QAAA,CAAA,MAAA,CAAA;AACA,WAAA,UAAA,GAAA,CAAA;AACA,WAAA,UAAA,GALA,CAKA;AACA,KAtFA;AAwFA,IAAA,cAxFA,4BAwFA;AACA,UAAA,UAAA,GAAA,MAAA,CAAA,IAAA,CAAA,WAAA,CAAA,KAAA,OAAA,CAAA,EAAA,GAAA,CAAA,MAAA,CAAA;AACA,UAAA,YAAA,GAAA,UAAA,CAAA,OAAA,CAAA,KAAA,UAAA,CAAA;AACA,WAAA,UAAA,GAAA,UAAA,CAAA,CAAA,YAAA,GAAA,CAAA,IAAA,UAAA,CAAA,MAAA,CAAA;AACA,WAAA,UAAA,GAJA,CAIA;AACA,KA7FA;AA+FA,IAAA,UA/FA,wBA+FA;AACA,WAAA,OAAA,GAAA,CAAA;AACA,WAAA,UAAA,GAAA,CAAA;AACA,WAAA,UAAA;AACA;AAnGA;AApBA,CAAA","sourcesContent":["<template>\r\n  <div class=\"live2d-wrap\">\r\n    <div class=\"live2d-menu\">\r\n      <span class=\"live2d-menu--item\"><i class=\"el-icon-refresh\" @click=\"changeModel\"></i></span>\r\n      <span class=\"live2d-menu--item\"><i class=\"el-icon-goods\" @click=\"changeTextures\"></i></span>\r\n    </div>\r\n    <canvas id=\"live2d\" width=\"200\" height=\"200\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nconst MODEL_MAP = {\r\n  1: 'live2d-widget-model-gf',\r\n  2: 'live2d-widget-model-hijiki',\r\n}\r\n\r\nconst TEXTURE_MAP = {\r\n  1: { 0: 'Gantzert_Felixander.model.json' }, // 若有实际纹理文件，再替换为真实文件名\r\n  2: { 0: 'hijiki.model.json' }\r\n}\r\n\r\nexport default {\r\n  name: 'Live2d',\r\n  data() {\r\n    return {\r\n      modelId: 1,\r\n      texturesId: 0,\r\n      live2dInstance: null // 存储 Live2D 实例，用于销毁\r\n    };\r\n  },\r\n  mounted() {\r\n    this.loadLive2dScript().then(() => {\r\n      this.initLive2D()\r\n    }).catch(err => {\r\n      console.error('Live2D脚本加载失败：', err)\r\n    })\r\n  },\r\n  // 组件卸载时销毁模型，避免内存泄漏\r\n  beforeUnmount() {\r\n    this.destroyLive2D()\r\n  },\r\n  methods: {\r\n    loadLive2dScript() {\r\n      return new Promise((resolve, reject) => {\r\n        if (window.loadlive2d || window.L2Dwidget) {\r\n          resolve()\r\n          return\r\n        }\r\n        const script = document.createElement('script')\r\n        script.src = '/static/live2dw/lib/L2Dwidget.min.js'\r\n        script.type = 'text/javascript'\r\n        script.async = false\r\n        script.onload = () => resolve()\r\n        script.onerror = (err) => reject(err)\r\n        document.body.appendChild(script)\r\n      })\r\n    },\r\n\r\n    destroyLive2D() {\r\n      if (this.live2dInstance) {\r\n        // 兼容不同版本的销毁方法\r\n        if (this.live2dInstance.destroy) {\r\n          this.live2dInstance.destroy()\r\n        } else if (window.L2Dwidget && window.L2Dwidget.destroy) {\r\n          window.L2Dwidget.destroy('live2d')\r\n        }\r\n        this.live2dInstance = null\r\n      }\r\n      // 清空画布，避免残留\r\n      const canvas = document.getElementById('live2d')\r\n      if (canvas) {\r\n        const ctx = canvas.getContext('2d')\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n      }\r\n    },\r\n\r\n    initLive2D() {\r\n      // 先销毁旧模型，再初始化新模型（核心修复）\r\n      this.destroyLive2D()\r\n\r\n      const canvas = document.getElementById('live2d')\r\n      if (!canvas) {\r\n        console.error('未找到Live2D画布！')\r\n        return\r\n      }\r\n\r\n      const modelFolder = MODEL_MAP[this.modelId]\r\n      const textureFile = TEXTURE_MAP[this.modelId][this.texturesId]\r\n      const modelConfigPath = `/public/static/live2dw/${modelFolder}/assets/${textureFile}`\r\n\r\n\r\n      console.log(`当前加载模型：ID=${this.modelId}，路径=${modelConfigPath}`)\r\n\r\n      try {\r\n        if (window.loadlive2d) {\r\n\r\n          this.live2dInstance = window.loadlive2d('live2d', modelConfigPath)\r\n        } else if (window.L2Dwidget) {\r\n          // 存储实例，用于后续销毁\r\n          this.live2dInstance = window.L2Dwidget.init({\r\n            canvasId: 'live2d',\r\n            model: { url: modelConfigPath },\r\n            display: {\r\n              position: 'fixed',\r\n              bottom: '10px',\r\n              left: '100px',\r\n              width: 200, \r\n              height: 200\r\n            },\r\n            log: false\r\n          })\r\n        } else {\r\n          console.error('未找到Live2D核心API')\r\n        }\r\n      } catch (err) {\r\n        console.error('Live2D初始化失败：', err)\r\n        // 加载失败时重置到默认模型\r\n        this.resetModel()\r\n      }\r\n    },\r\n\r\n    changeModel() {\r\n      const modelIds = Object.keys(MODEL_MAP).map(Number)\r\n      const currentIndex = modelIds.indexOf(this.modelId)\r\n      this.modelId = modelIds[(currentIndex + 1) % modelIds.length]\r\n      this.texturesId = 0\r\n      this.initLive2D() // 重新初始化（会先销毁旧模型）\r\n    },\r\n\r\n    changeTextures() {\r\n      const textureIds = Object.keys(TEXTURE_MAP[this.modelId]).map(Number)\r\n      const currentIndex = textureIds.indexOf(this.texturesId)\r\n      this.texturesId = textureIds[(currentIndex + 1) % textureIds.length]\r\n      this.initLive2D() // 重新初始化（会先销毁旧模型）\r\n    },\r\n\r\n    resetModel() {\r\n      this.modelId = 1\r\n      this.texturesId = 0\r\n      this.initLive2D()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n.live2d-wrap\r\n  position fixed\r\n  left 0\r\n  bottom 10px\r\n  width 100px\r\n  z-index 999\r\n  overflow hidden\r\n.live2d-wrap:hover .live2d-menu\r\n  display flex\r\n\r\n.live2d-menu\r\n  position absolute\r\n  top 0px\r\n  left 10px\r\n  display none\r\n  flex-direction column\r\n  align-items center\r\n  justify-content space-around\r\n  width 40px\r\n  height 80px\r\n  padding 8px\r\n  background-color #fff\r\n  border-radius 20px\r\n  box-shadow 0 2px 10px rgba(0,0,0,0.1)\r\n\r\n.live2d-menu--item\r\n  padding 4px\r\n  cursor pointer\r\n  color #666\r\n  &:hover\r\n    color #409eff\r\n</style>"],"sourceRoot":"src/components"}]}