{"remainingRequest":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\thread-loader\\dist\\cjs.js!D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\githubdesk\\Vue-blog\\vue-blog\\src\\store\\index.js","dependencies":[{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\src\\store\\index.js","mtime":1762602796711},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\githubdesk\\Vue-blog\\vue-blog\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovZ2l0aHViZGVzay9WdWUtYmxvZy92dWUtYmxvZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CmltcG9ydCBzdG9yZSBmcm9tICdzdG9yZSc7CmltcG9ydCBiYXNlIGZyb20gJ0AvY29uZmlnL2Jhc2UuY29uZmlnJzsKaW1wb3J0IGh0dHAgZnJvbSAnQC9hcGkvaHR0cCc7CmltcG9ydCBtb2RhbCBmcm9tICcuL21vZHVsZXMvbW9kYWwnOwp2YXIgVE9LRU5fTkFNRSA9IGJhc2UuVE9LRU5fTkFNRTsKVnVlLnVzZShWdWV4KTsKZXhwb3J0IGRlZmF1bHQgbmV3IFZ1ZXguU3RvcmUoewogIHN0YXRlOiB7CiAgICB0b2tlbjogc3RvcmUuZ2V0KFRPS0VOX05BTUUpIHx8ICIiLAogICAgdXNlckluZm86IHN0b3JlLmdldCgndXNlckluZm8nKSB8fCAiIiwKICAgIHVzZXJuYW1lOiBzdG9yZS5nZXQoJ3VzZXJuYW1lJykgfHwgIiIsCiAgICB3ZWxjb21lOiBzdG9yZS5nZXQoJ3dlbGNvbWUnKSB8fCBmYWxzZQogIH0sCiAgZ2V0dGVyczogewogICAgdXNlckluZm86IGZ1bmN0aW9uIHVzZXJJbmZvKHN0YXRlKSB7CiAgICAgIGlmIChzdGF0ZS50b2tlbikgewogICAgICAgIHJldHVybiBzdGF0ZS51c2VySW5mbzsKICAgICAgfQogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSkgewogICAgICBzdGF0ZS50b2tlbiA9IHN0b3JlLmdldChUT0tFTl9OQU1FKTsKICAgIH0sCiAgICBTRVRfVVNFUklORk86IGZ1bmN0aW9uIFNFVF9VU0VSSU5GTyhzdGF0ZSwgdXNlckluZm8pIHsKICAgICAgc3RhdGUudXNlckluZm8gPSB1c2VySW5mbzsKICAgICAgc3RvcmUuc2V0KCd1c2VySW5mbycsIHVzZXJJbmZvKTsKICAgIH0sCiAgICBTRVRfVVNFUk5BTUU6IGZ1bmN0aW9uIFNFVF9VU0VSTkFNRShzdGF0ZSwgdXNlcm5hbWUpIHsKICAgICAgc3RhdGUudXNlcm5hbWUgPSB1c2VybmFtZTsKICAgICAgc3RvcmUuc2V0KCd1c2VybmFtZScsIHVzZXJuYW1lKTsKICAgIH0sCiAgICBTRVRfV0VMQ09NRTogZnVuY3Rpb24gU0VUX1dFTENPTUUoc3RhdGUsIHdlbGNvbWUpIHsKICAgICAgc3RhdGUud2VsY29tZSA9IHdlbGNvbWU7CiAgICAgIHN0b3JlLnNldCgnd2VsY29tZScsIHdlbGNvbWUpOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZGlzcGF0Y2gsIGNvbW1pdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2gsIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nKTsKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdnZXRVc2VySW5mbycpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0VXNlckluZm86IGZ1bmN0aW9uIGdldFVzZXJJbmZvKF9yZWYyKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBjb21taXQsIHN0YXRlLCB1c2VyTGlzdCwgdXNlcm5hbWUsIHVzZXJJbmZvOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmMi5jb21taXQsIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gaHR0cCh7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdnZXRVc2VycycKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICB1c2VyTGlzdCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgdXNlckxpc3QgPSB1c2VyTGlzdC5saXN0OwogICAgICAgICAgICAgICAgdXNlcm5hbWUgPSBzdGF0ZS51c2VybmFtZTsKCiAgICAgICAgICAgICAgICBpZiAodXNlckxpc3QgJiYgQXJyYXkuaXNBcnJheSh1c2VyTGlzdCkpIHsKICAgICAgICAgICAgICAgICAgdXNlckxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnVzZXJuYW1lID09PSB1c2VybmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgdXNlckluZm8gPSBpdGVtOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29tbWl0KCdTRVRfVVNFUk5BTUUnLCBzdGF0ZS51c2VybmFtZSk7CiAgICAgICAgICAgICAgICBjb21taXQoJ1NFVF9VU0VSSU5GTycsIHVzZXJJbmZvKTsKCiAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLndlbGNvbWUgJiYgdXNlckluZm8pIHsKICAgICAgICAgICAgICAgICAgY29tbWl0KCdTRVRfV0VMQ09NRScsIHRydWUpOwogICAgICAgICAgICAgICAgICBWdWUucHJvdG90eXBlLiRub3RpZnkuc3VjY2Vzcyh7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfnmbvlvZXmiJDlip8nLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJcdTZCMjJcdThGQ0VcdTRGNjAgIi5jb25jYXQodXNlckluZm8ubmlrbmFtZSkKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHVzZXJJbmZvKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDIudDApOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIG51bGwpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzEsIDE0XV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIG1vZHVsZXM6IHsKICAgIG1vZGFsOiBtb2RhbAogIH0KfSk7"},{"version":3,"sources":["D:/githubdesk/Vue-blog/vue-blog/src/store/index.js"],"names":["Vue","Vuex","store","base","http","modal","TOKEN_NAME","use","Store","state","token","get","userInfo","username","welcome","getters","mutations","SET_TOKEN","SET_USERINFO","set","SET_USERNAME","SET_WELCOME","actions","login","dispatch","commit","getUserInfo","type","userList","list","Array","isArray","forEach","item","prototype","$notify","success","title","message","nikname","console","log","modules"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport store from 'store'\nimport base from '@/config/base.config'\nimport http from '@/api/http'\n\nimport modal from './modules/modal'\n\nconst { TOKEN_NAME } = base\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    token: store.get(TOKEN_NAME) || \"\",\n    userInfo: store.get('userInfo') || \"\",\n    username: store.get('username') || \"\",\n    welcome: store.get('welcome') || false,\n  },\n  getters: {\n    userInfo(state) {\n      if (state.token) {\n        return state.userInfo\n      }\n    }\n  },\n  mutations: {\n    SET_TOKEN(state) {\n      state.token = store.get(TOKEN_NAME)\n    },\n    SET_USERINFO(state, userInfo) {\n      state.userInfo = userInfo\n      store.set('userInfo', userInfo)\n    },\n\n    SET_USERNAME(state, username) {\n      state.username = username\n      store.set('username', username)\n    },\n    SET_WELCOME(state, welcome) {\n      state.welcome = welcome\n      store.set('welcome', welcome)\n    }\n  },\n  actions: {\n    async login({ dispatch, commit }) {\n      commit('SET_TOKEN')\n      dispatch('getUserInfo')\n\n\n    },\n    async getUserInfo({ commit, state }) {\n      try {\n        let userList = await http({ type: 'getUsers' })\n        userList = userList.list\n        let username = state.username\n        let userInfo\n\n        if (userList && Array.isArray(userList)) {\n          userList.forEach(item => {\n            if (item.username === username) {\n              userInfo = item\n            }\n          })\n        }\n\n        commit('SET_USERNAME', state.username)\n        commit('SET_USERINFO', userInfo)\n\n        if (!state.welcome && userInfo) {\n          commit('SET_WELCOME', true)\n          Vue.prototype.$notify.success({\n            title: '登录成功',\n            message: `欢迎你 ${userInfo.nikname}`\n          })\n        }\n\n        return userInfo // 返回用户信息\n      } catch (err) {\n        console.log(err)\n        return null\n      }\n    }\n  },\n  modules: {\n    modal\n  }\n})\n"]}]}