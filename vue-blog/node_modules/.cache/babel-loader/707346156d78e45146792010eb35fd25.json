{"remainingRequest":"D:\\前端大课\\五、前端框架\\Vue第二十三天 Vue高级  Vue  vue-blog 侧边栏 文章列表\\案例\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\前端大课\\五、前端框架\\Vue第二十三天 Vue高级  Vue  vue-blog 侧边栏 文章列表\\案例\\vue-blog\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\前端大课\\五、前端框架\\Vue第二十三天 Vue高级  Vue  vue-blog 侧边栏 文章列表\\案例\\vue-blog\\src\\api\\http.js","dependencies":[{"path":"D:\\前端大课\\五、前端框架\\Vue第二十三天 Vue高级  Vue  vue-blog 侧边栏 文章列表\\案例\\vue-blog\\src\\api\\http.js","mtime":1611666114311},{"path":"D:\\前端大课\\五、前端框架\\Vue第二十三天 Vue高级  Vue  vue-blog 侧边栏 文章列表\\案例\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\前端大课\\五、前端框架\\Vue第二十三天 Vue高级  Vue  vue-blog 侧边栏 文章列表\\案例\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\前端大课\\五、前端框架\\Vue第二十三天 Vue高级  Vue  vue-blog 侧边栏 文章列表\\案例\\vue-blog\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi9cdTUyNERcdTdBRUZcdTU5MjdcdThCRkUvXHU0RTk0XHUzMDAxXHU1MjREXHU3QUVGXHU2ODQ2XHU2N0I2L1Z1ZVx1N0IyQ1x1NEU4Q1x1NTM0MVx1NEUwOVx1NTkyOSBWdWVcdTlBRDhcdTdFQTcgIFZ1ZSAgdnVlLWJsb2cgXHU0RkE3XHU4RkI5XHU2ODBGIFx1NjU4N1x1N0FFMFx1NTIxN1x1ODg2OC9cdTY4NDhcdTRGOEIvdnVlLWJsb2cvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgc2VydmljZSBmcm9tICcuL2NvbW1vbic7CmltcG9ydCBzdG9yZSBmcm9tICdzdG9yZSc7CmltcG9ydCBBUElfTElTVCBmcm9tICdAL2NvbmZpZy9hcGkuY29uZmlnJzsKaW1wb3J0IGJhc2UgZnJvbSAnQC9jb25maWcvYmFzZS5jb25maWcnOwppbXBvcnQgZW5jcnlwdCBmcm9tICdAL3V0aWwvZW5jcnlwdCc7CnZhciBUT0tFTl9OQU1FID0gYmFzZS5UT0tFTl9OQU1FOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIdHRwKF94KSB7CiAgcmV0dXJuIF9IdHRwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9IdHRwKCkgewogIF9IdHRwID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKF9yZWYpIHsKICAgIHZhciB0eXBlLCBkYXRhLCBfQVBJX0xJU1QkdHlwZSwgdXJsLCBtZXRob2QsIF9BUElfTElTVCR0eXBlJG5vTWVzcywgbm9NZXNzYWdlLCBfQVBJX0xJU1QkdHlwZSRyc2FLZXksIHJzYUtleSwgX0FQSV9MSVNUJHR5cGUkcmVzdCwgcmVzdCwgX0FQSV9MSVNUJHR5cGUkc2V0VG9rLCBzZXRUb2tlbiwgcmVzdFN5bWJvbCwgcmVzdWx0LCB0b2tlbiwgdWlkLCBtZXNzYWdlOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgdHlwZSA9IF9yZWYudHlwZSwgZGF0YSA9IF9yZWYuZGF0YTsKCiAgICAgICAgICAgIGlmICh0eXBlIGluIEFQSV9MSVNUKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQVBJ6K+35rGC6ZSZ6K+vJyk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBfQVBJX0xJU1QkdHlwZSA9IEFQSV9MSVNUW3R5cGVdLCB1cmwgPSBfQVBJX0xJU1QkdHlwZS51cmwsIG1ldGhvZCA9IF9BUElfTElTVCR0eXBlLm1ldGhvZCwgX0FQSV9MSVNUJHR5cGUkbm9NZXNzID0gX0FQSV9MSVNUJHR5cGUubm9NZXNzYWdlLCBub01lc3NhZ2UgPSBfQVBJX0xJU1QkdHlwZSRub01lc3MgPT09IHZvaWQgMCA/IGZhbHNlIDogX0FQSV9MSVNUJHR5cGUkbm9NZXNzLCBfQVBJX0xJU1QkdHlwZSRyc2FLZXkgPSBfQVBJX0xJU1QkdHlwZS5yc2FLZXksIHJzYUtleSA9IF9BUElfTElTVCR0eXBlJHJzYUtleSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfQVBJX0xJU1QkdHlwZSRyc2FLZXksIF9BUElfTElTVCR0eXBlJHJlc3QgPSBfQVBJX0xJU1QkdHlwZS5yZXN0LCByZXN0ID0gX0FQSV9MSVNUJHR5cGUkcmVzdCA9PT0gdm9pZCAwID8gZmFsc2UgOiBfQVBJX0xJU1QkdHlwZSRyZXN0LCBfQVBJX0xJU1QkdHlwZSRzZXRUb2sgPSBfQVBJX0xJU1QkdHlwZS5zZXRUb2tlbiwgc2V0VG9rZW4gPSBfQVBJX0xJU1QkdHlwZSRzZXRUb2sgPT09IHZvaWQgMCA/IGZhbHNlIDogX0FQSV9MSVNUJHR5cGUkc2V0VG9rOwogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDsKICAgICAgICAgICAgbWV0aG9kID0gbWV0aG9kLnRvTG93ZXJDYXNlKCk7CgogICAgICAgICAgICBpZiAocmVzdCkgewogICAgICAgICAgICAgIHJlc3RTeW1ib2wgPSB1cmwubWF0Y2goLzooLiopJC8pWzFdOwogICAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKC86KC4qKSQvLCBkYXRhW3Jlc3RTeW1ib2xdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCEocnNhS2V5ICYmIGRhdGFbcnNhS2V5XSkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgcmV0dXJuIGVuY3J5cHQoZGF0YVtyc2FLZXldKTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBkYXRhW3JzYUtleV0gPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGRhdGEgPSBtZXRob2QgPT09ICdnZXQnID8gewogICAgICAgICAgICAgIHBhcmFtczogZGF0YQogICAgICAgICAgICB9IDogZGF0YTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICByZXR1cm4gc2VydmljZVttZXRob2RdKHVybCwgZGF0YSk7CgogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgIGlmIChzZXRUb2tlbikgewogICAgICAgICAgICAgIHRva2VuID0gcmVzdWx0LnRva2VuOwogICAgICAgICAgICAgIHVpZCA9IHJlc3VsdC51c2VySWQ7CiAgICAgICAgICAgICAgc3RvcmUuc2V0KCd1aWQnLCB1aWQpOyAvL+acrOWcsOWtmOWCqHRva2VuCgogICAgICAgICAgICAgIHN0b3JlLnNldChUT0tFTl9OQU1FLCB0b2tlbik7CiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2xvZ2luJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3VsdCk7CgogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE5OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDQpOwoKICAgICAgICAgICAgaWYgKF9jb250ZXh0LnQwLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgbWVzc2FnZSA9IF9jb250ZXh0LnQwLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKCiAgICAgICAgICAgICAgaWYgKCFub01lc3NhZ2UpIHsKICAgICAgICAgICAgICAgIC8vaHR0cOWHveaVsOS9nOS4uuaPkuS7tuaMgui9veWIsOS6hiBWdWXnmoRwcm90b3R5cGXkuIogdGhpc+aMh+WQkXZ1ZeWunuS+iwogICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KF9jb250ZXh0LnQwKSk7CgogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCB0aGlzLCBbWzQsIDE5XV0pOwogIH0pKTsKICByZXR1cm4gX0h0dHAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQ=="},{"version":3,"sources":["D:/前端大课/五、前端框架/Vue第二十三天 Vue高级  Vue  vue-blog 侧边栏 文章列表/案例/vue-blog/src/api/http.js"],"names":["service","store","API_LIST","base","encrypt","TOKEN_NAME","Http","type","data","Error","url","method","noMessage","rsaKey","rest","setToken","toLowerCase","restSymbol","match","replace","params","result","token","uid","userId","set","$store","dispatch","response","message","$notify","error","title","Promise","reject"],"mappings":";;;;;;AAAA,OAAOA,OAAP,MAAoB,UAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,OAAP,MAAoB,gBAApB;IAEQC,U,GAAeF,I,CAAfE,U;AACR,wBAA8BC,IAA9B;AAAA;AAAA;;;kEAAe;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAuBC,YAAAA,IAAvB,QAAuBA,IAAvB,EAA6BC,IAA7B,QAA6BA,IAA7B;;AAAA,gBACPD,IAAI,IAAIL,QADD;AAAA;AAAA;AAAA;;AAAA,kBAEL,IAAIO,KAAJ,CAAU,SAAV,CAFK;;AAAA;AAAA,6BAI4EP,QAAQ,CAACK,IAAD,CAJpF,EAIPG,GAJO,kBAIPA,GAJO,EAIFC,MAJE,kBAIFA,MAJE,yCAIMC,SAJN,EAIMA,SAJN,sCAIkB,KAJlB,iEAIyBC,MAJzB,EAIyBA,MAJzB,sCAIkC,KAJlC,+DAIyCC,IAJzC,EAIyCA,IAJzC,oCAIgD,KAJhD,+DAIuDC,QAJvD,EAIuDA,QAJvD,sCAIkE,KAJlE;AAAA;AAMXJ,YAAAA,MAAM,GAAGA,MAAM,CAACK,WAAP,EAAT;;AACA,gBAAIF,IAAJ,EAAU;AACJG,cAAAA,UADI,GACSP,GAAG,CAACQ,KAAJ,CAAU,QAAV,EAAoB,CAApB,CADT;AAERR,cAAAA,GAAG,GAAGA,GAAG,CAACS,OAAJ,CAAY,QAAZ,EAAsBX,IAAI,CAACS,UAAD,CAA1B,CAAN;AACD;;AAVU,kBAWPJ,MAAM,IAAIL,IAAI,CAACK,MAAD,CAXP;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAYYT,OAAO,CAACI,IAAI,CAACK,MAAD,CAAL,CAZnB;;AAAA;AAYTL,YAAAA,IAAI,CAACK,MAAD,CAZK;;AAAA;AAcXL,YAAAA,IAAI,GAAGG,MAAM,KAAK,KAAX,GAAmB;AAAES,cAAAA,MAAM,EAAEZ;AAAV,aAAnB,GAAsCA,IAA7C;AAdW;AAAA,mBAgBQR,OAAO,CAACW,MAAD,CAAP,CAAgBD,GAAhB,EAAqBF,IAArB,CAhBR;;AAAA;AAgBPa,YAAAA,MAhBO;;AAkBX,gBAAIN,QAAJ,EAAc;AACRO,cAAAA,KADQ,GACAD,MAAM,CAACC,KADP;AAERC,cAAAA,GAFQ,GAEFF,MAAM,CAACG,MAFL;AAGZvB,cAAAA,KAAK,CAACwB,GAAN,CAAU,KAAV,EAAiBF,GAAjB,EAHY,CAIZ;;AACAtB,cAAAA,KAAK,CAACwB,GAAN,CAAUpB,UAAV,EAAsBiB,KAAtB;AACA,mBAAKI,MAAL,CAAYC,QAAZ,CAAqB,OAArB;AAED;;AA1BU,6CA2BJN,MA3BI;;AAAA;AAAA;AAAA;;AA6BX,gBAAI,YAAMO,QAAV,EAAoB;AACdC,cAAAA,OADc,GACJ,YAAMD,QAAN,CAAepB,IAAf,CAAoBqB,OADhB;;AAElB,kBAAI,CAACjB,SAAL,EAAgB;AACd;AACA,qBAAKkB,OAAL,CAAaC,KAAb,CAAmB;AACjBC,kBAAAA,KAAK,EAAE,IADU;AAEjBH,kBAAAA,OAAO,EAAPA;AAFiB,iBAAnB;AAID;AACF;;AAtCU,6CAuCJI,OAAO,CAACC,MAAR,aAvCI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import service from './common'\r\nimport store from 'store'\r\nimport API_LIST from '@/config/api.config'\r\nimport base from '@/config/base.config'\r\nimport encrypt from '@/util/encrypt'\r\n\r\nconst { TOKEN_NAME } = base\r\nexport default async function Http ({ type, data }) {\r\n  if (!(type in API_LIST)) {\r\n    throw new Error('API请求错误')\r\n  }\r\n  let { url, method, noMessage = false, rsaKey = false, rest = false, setToken = false } = API_LIST[type]\r\n  try {\r\n    method = method.toLowerCase()\r\n    if (rest) {\r\n      let restSymbol = url.match(/:(.*)$/)[1]\r\n      url = url.replace(/:(.*)$/, data[restSymbol])\r\n    }\r\n    if (rsaKey && data[rsaKey]) {\r\n      data[rsaKey] = await encrypt(data[rsaKey])\r\n    }\r\n    data = method === 'get' ? { params: data } : data\r\n\r\n    let result = await service[method](url, data)\r\n\r\n    if (setToken) {\r\n      let token = result.token;\r\n      let uid = result.userId\r\n      store.set('uid', uid)\r\n      //本地存储token\r\n      store.set(TOKEN_NAME, token)\r\n      this.$store.dispatch('login')\r\n     \r\n    }\r\n    return result\r\n  } catch (error) {\r\n    if (error.response) {\r\n      let message = error.response.data.message\r\n      if (!noMessage) {\r\n        //http函数作为插件挂载到了 Vue的prototype上 this指向vue实例\r\n        this.$notify.error({\r\n          title: '错误',\r\n          message\r\n        })\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n}\r\n"]}]}